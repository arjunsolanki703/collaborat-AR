(()=>{var t,e={7571:(t,e,i)=>{"use strict";i.d(e,{U:()=>s});var r=i(9445);class s{constructor(t){this._options=t}get options(){return this._options}get flixPath(){return this.options.isTestMode?this.options.isQaMode?"d":"q":this.options.isQaMode?"s":"p"}get flixDomain(){return`https://${r.t9}`}get assetsDomain(){switch(this.options.env){case r.E0.FLIX:return`https://${r.t9}/${this.flixPath}/`;default:return"https://img-cdn-vz.azureedge.net/"}}get modulesDomain(){switch(this.options.server){case r.oc.C3D_DEV_HOST:return`https://${r.BT}/`;case r.oc.C3D_PROD_HOST:return`https://${r.gF}/`;case r.oc.C3D_QA_HOST:return`https://${r.Dq}/`;case r.oc.FLIX_HOST:return`https://${r.t9}/${this.flixPath}/`;case r.oc.H3D_DEV_HOST:return`https://${r.QS}/`;case r.oc.H3D_PROD_HOST:return`https://${r.kd}/`;case r.oc.H3D_QA_HOST:return`https://${r.uD}/`;case r.oc.LOCALHOST:return`http://${r.Np}/`;default:return`${this.options.domain}/`}}get collectorUrl(){var t=this.modulesDomain;"/"===t[t.length-1]&&(t=t.slice(0,-1));let e=t.split("//"),i=e[0]+"//";var r=e[1].split(".");return r[0]&&(r[0]="collector"),i+r.join(".")}get enterArIcon(){return`${this.assetsDomain}hotlink-ok/viewer/enter-ar-black.png`}get exitArIcon(){return`${this.assetsDomain}hotlink-ok/viewer/close-black.png`}get glassesTryIcon(){return`${this.assetsDomain}hotlink-ok/viewer/glasses_try_on.svg`}get fullscreenIcon(){return`${this.assetsDomain}hotlink-ok/viewer/ic_fullscreen_black_48dp_1x.png`}get exitXrIcon(){return`${this.assetsDomain}hotlink-ok/viewer/close-black.png`}get posXrIcon(){return`${this.assetsDomain}hotlink-ok/viewer/position_on.svg`}get codeDomain(){switch(this.options.server){case r.oc.C3D_DEV_HOST:return`https://${r.BT}/`;case r.oc.C3D_PROD_HOST:return`https://${r.gF}/`;case r.oc.C3D_QA_HOST:return`https://${r.Dq}/`;case r.oc.FLIX_HOST:return`https://${r.t9}/`;case r.oc.H3D_DEV_HOST:return`https://${r.QS}/`;case r.oc.H3D_PROD_HOST:return`https://${r.kd}/`;case r.oc.H3D_QA_HOST:return`https://${r.uD}/`;case r.oc.LOCALHOST:return`https://${r.Np}/`;default:return`${this.options.domain}/`}}removeFlixPath(t){return t.replace("/s/","").replace("/d/","").replace("/q/","").replace("/p/","")}}},9445:(t,e,i)=>{"use strict";var r,s;i.d(e,{E0:()=>r,oc:()=>s,Np:()=>o,t9:()=>n,gF:()=>a,Dq:()=>l,BT:()=>h,kd:()=>p,uD:()=>d,QS:()=>c}),function(t){t[t.HEXA=1]="HEXA",t[t.CREATORS=2]="CREATORS",t[t.FLIX=3]="FLIX"}(r||(r={})),function(t){t[t.LOCALHOST=0]="LOCALHOST",t[t.H3D_PROD_HOST=1]="H3D_PROD_HOST",t[t.H3D_QA_HOST=2]="H3D_QA_HOST",t[t.H3D_DEV_HOST=3]="H3D_DEV_HOST",t[t.C3D_PROD_HOST=4]="C3D_PROD_HOST",t[t.C3D_QA_HOST=5]="C3D_QA_HOST",t[t.C3D_DEV_HOST=6]="C3D_DEV_HOST",t[t.FLIX_HOST=7]="FLIX_HOST"}(s||(s={}));var o="localhost:9000",n="d3np41mctoibfu.cloudfront.net",a="v.creators3d.com",l="vqa.creators3d.com",h="vdev.creators3d.com",p="v.hexa3d.io",d="vqa.hexa3d.io",c="vdev.hexa3d.io"},4795:(t,e,i)=>{"use strict";var r;i.d(e,{pt:()=>s,BV:()=>o});class s{constructor(){this.setAsMain=!0}}class o{constructor(){this.setAsMain=!0,this.setDefaultEncoding=!0}}!function(t){t[t.CUBE=1]="CUBE",t[t.TOUUS=2]="TOUUS"}(r||(r={}))},4740:(t,e,i)=>{"use strict";var r,s,o,n,a;i.d(e,{NL:()=>s,Rw:()=>a}),function(t){t[t.ERROR=1]="ERROR",t[t.WARNING=2]="WARNING"}(r||(r={})),function(t){t[t.TOP=1]="TOP",t[t.MAIN=2]="MAIN",t[t.WORKER=3]="WORKER",t[t.IGNORE=4]="IGNORE"}(s||(s={})),function(t){t[t.TWO=2]="TWO",t[t.THREE=3]="THREE",t[t.FOUR=4]="FOUR",t[t.FIVE=5]="FIVE"}(o||(o={})),function(t){t[t.INCH=1]="INCH",t[t.CM=2]="CM"}(n||(n={})),function(t){t[t.FINGERS=1]="FINGERS",t[t.WRIST=2]="WRIST",t[t.EYEWEAR=3]="EYEWEAR",t[t.HEADPHONES=4]="HEADPHONES",t[t.HELMET=5]="HELMET"}(a||(a={}))},924:(t,e,i)=>{"use strict";i.d(e,{k:()=>M});var r=i(9312),s=i(4740);class o{constructor(t){this.wrap=t,this.linearActivity=this.wrap.elements.determinate,this.currentPercentage=0}toggleLinearActivity(t){this.linearActivity.parentElement.style.height=t?this.linearActivity.parentElement.getAttribute("data-height"):"0px"}setDefaultHeight(t){isNaN(t)||(this.wrap.elements.linearActivity.style.height=t+"px",this.wrap.elements.linearActivity.setAttribute("data-height",this.wrap.elements.linearActivity.style.height))}setPercentage(t){if(this.currentPercentage<t){if(this.currentPercentage=t,this.wrap.props.attributes.loaderHeight&&(this.linearActivity.style.width=t+"%"),this.wrap.previewImage){let t=this.wrap.elements.preloadImgOpacity,e=100-(15+.75*(this.currentPercentage-0));t.style.clipPath="inset("+e+"% 0 0 0)",this.wrap.elements.preloadPreviewText.style.display="block"}let e={action:"setLoadingPercentage",data:t,to:s.NL.TOP,from:s.NL.MAIN};this.wrap.postToParent(e),this.wrap.worker&&(e={action:"onWrapLoaderProgress",data:t,to:s.NL.WORKER,from:s.NL.MAIN},this.wrap.worker.postMessage(e))}}}class n{constructor(t){this.wrap=t,this.isScriptLoaded=!1,this.cartridge=[]}createAnimation(t){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((e,i)=>{this.isScriptLoaded?e(this._launch(t)):(this.cartridge.push({animation:t,resolve:e}),this._getScriptAsync())}))}))}_launch(t){let e=lottie.loadAnimation(t);return t.delay&&(e.onLoopComplete=()=>{e.pause(),setTimeout((()=>{e.play()}),t.delay)}),e}_getScriptAsync(){if(this.isFetching)return;this.isFetching=!0;let t=document.createElement("script");t.addEventListener("load",this._onScript.bind(this),!1),t.setAttribute("type","text/javascript"),t.setAttribute("src",this.wrap.cdn.modulesDomain+"third-party/libs/lottie.min.js"),this.wrap.elements.body.appendChild(t)}_onScript(){this.isScriptLoaded=!0,this.isFetching=!1,this.cartridge.forEach((t=>{t.resolve(this._launch(t.animation))}))}}class a{constructor(t,e,i){this.wrap=t,this.domElement=e,this.slave=i,this.attachEvents()}postToSlave(t,e){if(e&&e.target){const t=e.target;if(t.id&&t.id.indexOf("variant_")>-1)return}const i=this.slave;if(t.data){delete t.data.nativeEvent;let e={};Object.assign(e,t.data);let i=["clientX","clientY","deltaX","deltaY","pageX","pageY","button"];if(t.data.touches){e.touches=[];for(let i=0;i<t.data.touches.length;i++)e.touches.push({pageX:t.data.touches[i].pageX,pageY:t.data.touches[i].pageY})}i.forEach((i=>e[i]=t.data[i])),t.data=e}if(i.location)if(t.action){const e=t.action.replace("Event.","");this.wrap.app&&this.wrap.app.S3DControls&&this.wrap.app.S3DControls.eventsToListen[e]&&this.wrap.app.S3DControls.eventsToListen[e](t.data)}else console.warn("OrbitControlsWrap: unknown action in message",t);else i.postMessage(t);this.wrap.props.isBlur&&this.wrap.setProps({isBlur:!1})}onContextMenu(t){const e={action:"Event.contextmenu",data:t,to:s.NL.WORKER,from:s.NL.MAIN};this.postToSlave(e,t),t.preventDefault()}onMouseDown(t){const e={action:"Event.mousedown",data:t,to:s.NL.WORKER,from:s.NL.MAIN};this.postToSlave(e,t),t.preventDefault()}onMouseWheel(t){window.clearTimeout(this.isScrolling),this.isScrolling=setTimeout((()=>{const e={action:"Event.wheelend",data:t,to:s.NL.WORKER,from:s.NL.MAIN};this.postToSlave(e,t)}),66);const e={action:"Event.wheel",data:t,to:s.NL.WORKER,from:s.NL.MAIN};this.postToSlave(e,t),t.preventDefault()}onTouchStart(t){const e={action:"Event.touchstart",data:t,to:s.NL.WORKER,from:s.NL.MAIN};this.postToSlave(e,t)}onTouchEnd(t){const e={action:"Event.touchend",data:t,to:s.NL.WORKER,from:s.NL.MAIN};this.postToSlave(e,t)}onTouchMove(t){const e={action:"Event.touchmove",data:t,to:s.NL.WORKER,from:s.NL.MAIN};this.postToSlave(e,t),t.preventDefault()}onMouseMove(t){const e={action:"Event.mousemove",data:t,to:s.NL.WORKER,from:s.NL.MAIN};this.postToSlave(e,t),t.preventDefault()}onMouseUp(t){const e={action:"Event.mouseup",data:t,to:s.NL.WORKER,from:s.NL.MAIN};this.postToSlave(e,t)}onKeyDown(t){const e={action:"Event.keydown",data:t,to:s.NL.WORKER,from:s.NL.MAIN};this.postToSlave(e,t)}attachEvents(){this.domElement.addEventListener("contextmenu",this.onContextMenu.bind(this),!1),this.domElement.addEventListener("mousedown",this.onMouseDown.bind(this),!1),this.domElement.addEventListener("wheel",this.onMouseWheel.bind(this),!1),this.domElement.addEventListener("touchstart",this.onTouchStart.bind(this),!1),this.domElement.addEventListener("touchend",this.onTouchEnd.bind(this),!1),this.domElement.addEventListener("touchmove",this.onTouchMove.bind(this),!1),document.addEventListener("mousemove",this.onMouseMove.bind(this),!1),document.addEventListener("mouseup",this.onMouseUp.bind(this),!1),window.addEventListener("keydown",this.onKeyDown.bind(this),!1),window.addEventListener("mouseout",this.onTouchEnd.bind(this),!1),window.addEventListener("mouseout",this.onMouseUp.bind(this),!1)}dispose(){this.domElement.removeEventListener("contextmenu",this.onContextMenu.bind(this),!1),this.domElement.removeEventListener("mousedown",this.onMouseDown.bind(this),!1),this.domElement.removeEventListener("wheel",this.onMouseWheel.bind(this),!1),this.domElement.removeEventListener("touchstart",this.onTouchStart.bind(this),!1),this.domElement.removeEventListener("touchend",this.onTouchEnd.bind(this),!1),this.domElement.removeEventListener("touchmove",this.onTouchMove.bind(this),!1),document.removeEventListener("mousemove",this.onMouseMove.bind(this),!1),document.removeEventListener("mouseup",this.onMouseUp.bind(this),!1),window.removeEventListener("keydown",this.onKeyDown.bind(this),!1),window.removeEventListener("mouseout",this.onTouchEnd.bind(this),!1),window.removeEventListener("mouseout",this.onMouseUp.bind(this),!1)}}var l,h,p,d,c=i(8426);class u{constructor(t){this.main=t}toggleFullscreen(){this.main.toggleFullscreen()}onModelLoaded(t){this.onModelLoaded(t.data)}toggleArGlassesButton(t){this.main.toggleArGlassesButton(t.obj.state,t.obj.type)}toggleXr(t){return(0,r.mG)(this,void 0,void 0,(function*(){yield this.main.toggleXr(t.obj.state,t.obj.value,t.obj.showIcon)}))}setProps(t){this.main.setProps(t.value.props)}appendElement(t){this.main.appendDynamicElement(t.obj.obj,t.obj.events,t.obj.selectorToAppend)}displayFiles(t){this.main.displayFile(t.value.files)}}class m{constructor(){this.enabled=!1,this.files={}}add(t,e){!1!==this.enabled&&(this.files[t]=e)}get(t){if(!1!==this.enabled)return this.files[t]}remove(t){delete this.files[t]}clear(){this.files={}}}class g{constructor(t){this.wrap=t,this.cubeTextures=new Map}getKey(t,e){return`${t}_${e?0:1}`}onLoad(t,e){if(this.wrap.worker){let i={action:"setLightProbeCoefficients",data:{key:t,arr:e},to:s.NL.WORKER};this.wrap.worker.postMessage(i)}else this.wrap.app.hdriService.setLightProbeByCoefficients(t,e)}getLightProbeCoefficients(t,e,i=!1){let r=1*t,s="boolean"==typeof e&&e,o=this.getKey(r,s);if(this.cubeTextures.get(o))return void this.loadLightProbe(o,i?null:this.onLoad.bind(this));let n=this.getHdrPath(r),a=this.getHdrUrls(r);(new THREE.CubeTextureLoader).setPath(n).load(a,(t=>{this.cubeTextures.set(o,{cubeTexture:t}),this.loadLightProbe(o,i?null:this.onLoad.bind(this))}))}getHdrPath(t){return`${this.wrap.cdn.assetsDomain}hotlink-ok/hdri/`+t+"/"}getHdrUrls(t){let e=()=>{let t="";return this.HDRBlur&&(t="_1"),t},i=[];if(t){i=["posx"+e(),"negx"+e(),"posy"+e(),"negy"+e(),"posz"+e(),"negz"+e()];let r="";switch(t){case 1:r="jpg";break;case 2:case 3:r="png";break;default:r="jpg"}for(let t=0;t<i.length;t++)i[t]+="."+r}return i}loadLightProbe(t,e){if(!THREE.LightProbeGenerator)return void this.wrap.loadScript(this.wrap.cdn.modulesDomain+"third-party/three.js/LightProbeGenerator.min.js",(()=>{this.loadLightProbe(t,e)}));let i=this.cubeTextures.get(t);if(i.lightProbe||(i.lightProbe=new THREE.LightProbe,i.lightProbe.copy(THREE.LightProbeGenerator.fromCubeTexture(i.cubeTexture)),this.cubeTextures.set(t,i)),e){let r=i.lightProbe.sh,s=[];for(let t=0;t<r.coefficients.length;t++)s.push({x:r.coefficients[t].x,y:r.coefficients[t].y,z:r.coefficients[t].z});e(t,s)}}}!function(t){t[t.Z_INDEX=1]="Z_INDEX",t[t.REVERSE_PAINTRE_SORT_STABLE=2]="REVERSE_PAINTRE_SORT_STABLE",t[t.PAINTER_SORT_STABLE=3]="PAINTER_SORT_STABLE"}(l||(l={}));class f{constructor(t=0,e=0){this.x=t,this.y=e}}!function(t){t[t.MATERIAL_BLOOM=1]="MATERIAL_BLOOM"}(h||(h={})),function(t){t[t.PERSPECTIVE_CAMERA=1]="PERSPECTIVE_CAMERA",t[t.ORTHOGRAPHIC_CAMERA=2]="ORTHOGRAPHIC_CAMERA"}(p||(p={}));class v{constructor(t,e){this.wrap=t,this.domElement=e,this.mouse=new f,this.mouse.x=-1,this.downCoo=new f,this.lastDownCoo=new f,this._isMouseDown=!1}get isMouseDown(){return this._isMouseDown}toggleState(t){t?this.activate():this.deactivate()}activate(){this.eventsAttached||(this.eventsAttached=!0,document.addEventListener("mousemove",this.onDocumentMouseMove.bind(this),!1),document.addEventListener("mousedown",this.onDocumentMouseDown.bind(this),!1),document.addEventListener("mouseup",this.onDocumentMouseUp.bind(this),!1),document.addEventListener("mouseout",this.onDocumentMouseUp.bind(this),!1),this.domElement.addEventListener("touchmove",this.onTouchMove.bind(this),!1),this.domElement.addEventListener("touchstart",this.onTouchStart.bind(this),!1),this.domElement.addEventListener("touchend",this.onTouchEnd.bind(this),!1)),this.isActive=!0}deactivate(){this.isActive=!1}onDocumentMouseDown(){if(!this.isActive)return;this._isMouseDown=!0,this.saveDownCoo();let t={action:"onRayDocumentMouseDown",to:s.NL.WORKER,from:s.NL.MAIN};this.broadcastEvent(t)}onDocumentMouseUp(){if(!this.isActive)return;this._isMouseDown=!1;let t={action:"onRayDocumentMouseUp",to:s.NL.WORKER,from:s.NL.MAIN};this.broadcastEvent(t)}onTouchStart(){if(!this.isActive)return;this._isMouseDown=!0,this.saveDownCoo();let t={action:"onRayDocumentTouchStart",to:s.NL.WORKER,from:s.NL.MAIN};this.broadcastEvent(t)}onTouchEnd(){if(!this.isActive)return;this._isMouseDown=!1;let t={action:"onRayDocumentTouchEnd",to:s.NL.WORKER,from:s.NL.MAIN};this.broadcastEvent(t)}onTouchMove(t){if(!this.isActive)return;this.saveDownCoo();let e={action:"onRayDocumentTouchMove",to:s.NL.WORKER,from:s.NL.MAIN};this.broadcastEvent(e,t),this.mouse.x=(t.touches[0].clientX||t.touches[0].pageX)/window.innerWidth*2-1,this.mouse.y=-(t.touches[0].clientY||t.touches[0].pageY)/window.innerHeight*2+1}saveDownCoo(){this.lastDownCoo.x=this.downCoo.x,this.lastDownCoo.y=this.downCoo.y,this.downCoo.x=this.mouse.x,this.downCoo.y=this.mouse.y}onDocumentMouseMove(t){if(!this.isActive)return;this.saveDownCoo();let e={action:"onRayDocumentMouseMove",to:s.NL.WORKER,from:s.NL.MAIN};this.broadcastEvent(e,t),this.mouse.x=t.clientX/window.innerWidth*2-1,this.mouse.y=-t.clientY/window.innerHeight*2+1}broadcastEvent(t,e){if(this.wrap.worker)t.data=t.data||{},e&&(t.data.event={clientX:e.touches?e.touches[0].clientX||e.touches[0].pageX:e.clientX,clientY:e.touches?e.touches[0].clientY||e.touches[0].pageY:e.clientY}),this.wrap.worker.postMessage(t);else switch(t.action){case"onRayDocumentMouseMove":this.wrap.app.raycasterHelper.onDocumentMouseMove(e);break;case"onRayDocumentMouseDown":this.wrap.app.raycasterHelper.onDocumentMouseDown();break;case"onRayDocumentMouseUp":this.wrap.app.raycasterHelper.onDocumentMouseUp();break;case"onRayDocumentTouchMove":this.wrap.app.raycasterHelper.onDocumentTouchMove(e);break;case"onRayDocumentTouchStart":this.wrap.app.raycasterHelper.onDocumentTouchStart();break;case"onRayDocumentTouchEnd":this.wrap.app.raycasterHelper.onDocumentTouchEnd()}}}class y{constructor(t){this.THREE=t,this.cache=new m,this.cache.enabled=!0,this._isReady=!1,this._onReadyResolve=[],this._onReady=new Promise(((t,e)=>{this._isReady=!0,this._onReadyResolve.push(t)})),self.createImageBitmap&&((t,e="application/octet-stream")=>{fetch(`data:${e};base64,${"iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8Xw8AAoMBgDTD2qgAAAAASUVORK5CYII="}`).then((t=>t.blob())).then((t=>createImageBitmap(t))).then((t=>{this.defaultCanvasTexture=this.convertImageBitmapToCanvasTexture(t),this.resolveOnReady()}))})(0,"image/png")}get isReady(){return this._isReady}clearCache(){this.cache.clear()}setTHREE(t){this.THREE=t}onReady(){return(0,r.mG)(this,void 0,void 0,(function*(){return setTimeout((()=>{this.resolveOnReady()})),this._onReady}))}resolveOnReady(){this.defaultCanvasTexture&&(this._onReadyResolve.forEach((t=>t())),this._onReadyResolve=[])}fixVersion(){if(this.THREE.Quaternion.prototype.invert||(this.THREE.Quaternion.prototype.invert=this.THREE.Quaternion.prototype.inverse),this.THREE.LinearMipmapLinearFilter=this.THREE.LinearMipmapLinearFilter||this.THREE.LinearMipMapLinearFilter,this.THREE.NearestMipmapNearestFilter=this.THREE.NearestMipmapNearestFilter||this.THREE.NearestMipMapNearestFilter,this.THREE.NearestMipmapLinearFilter=this.THREE.NearestMipmapLinearFilter||this.THREE.NearestMipMapLinearFilter,this.THREE.LinearMipmapNearestFilter=this.THREE.LinearMipmapNearestFilter||this.THREE.LinearMipMapNearestFilter,!(new this.THREE.Loader).manager){let t=this;this.THREE.Loader=function(e){this.manager=void 0!==e?e:t.THREE.DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}},Object.assign(this.THREE.Loader.prototype,{load:function(){},loadAsync:function(t,e){var i=this;return new Promise((function(r,s){i.load(t,r,e,s)}))},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}})}if(!(new this.THREE.LoadingManager).addHandler){let t=this.THREE.LoadingManager;this.THREE.LoadingManager=function(e,i,r){let s=new t(e,i,r);return s.handlers=[],s.addHandler=function(t,e){return s.handlers.push(t,e),s},s.removeHandler=function(t){var e=s.handlers.indexOf(t);return-1!==e&&s.handlers.splice(e,2),s},s.getHandler=function(t){for(var e=0,i=s.handlers.length;e<i;e+=2){var r=s.handlers[e],o=s.handlers[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return o}return null},s}}(new this.THREE.BufferGeometry).setAttribute||Object.assign(this.THREE.BufferGeometry.prototype,{addAttribute:function(t,e){this.setAttribute(t,e)},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this}}),this.THREE.Scene.prototype.dispose&&this.THREE.Scene.prototype.dispose.toString&&this.THREE.Scene.prototype.dispose.toString().indexOf("console.error")>-1&&(this.THREE.Scene.prototype.dispose=()=>{}),this.THREE.Scene.prototype.dispose||(this.THREE.Scene.prototype.dispose=()=>{}),this.THREE.Group.prototype.dispose&&this.THREE.Group.prototype.dispose.toString&&this.THREE.Group.prototype.dispose.toString().indexOf("console.error")>-1&&(this.THREE.Group.prototype.dispose=()=>{}),this.THREE.Group.prototype.dispose||(this.THREE.Group.prototype.dispose=()=>{})}hijackObjectLoader(){let t=this;this.THREE.ObjectLoader.prototype.parseImages=function(e,i){var r,s=this,o={};function n(t){return s.manager.itemStart(t),r.load(t,(function(){s.manager.itemEnd(t)}),void 0,(function(){s.manager.itemError(t),s.manager.itemEnd(t)}))}if(void 0!==e&&e.length>0){var a=new t.THREE.LoadingManager(i);(r=new t.THREE.ImageBitmapLoader(a)).setCrossOrigin(this.crossOrigin);for(var l=0,h=e.length;l<h;l++){var p=e[l],d=p.url;if(Array.isArray(d)){o[p.uuid]=[];for(var c=0,u=d.length;c<u;c++){var m=d[c];if(m instanceof self.ImageBitmap)o[p.uuid].push(m);else{var g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(m)?m:s.resourcePath+m;o[p.uuid].push(n(g))}}}else p.url instanceof self.ImageBitmap?o[p.uuid]=p.url:(g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p.url)?p.url:s.resourcePath+p.url,o[p.uuid]=n(g))}}return o}}hijackImageBitmapLoader(){let t=this.THREE.ImageBitmapLoader.prototype.load,e=this;this.THREE.ImageBitmapLoader.prototype.load=function(i,r,s,o){var n=new e.THREE.CanvasTexture;const a=i.search(/\.jpe?g($|\?)/i)>0||0===i.search(/^data\:image\/jpeg/),l=i.search(/\.webp?g($|\?)/i)>0||0===i.search(/^data\:image\/webp/);n.format=l?e.THREE.RGBAFormat:a?e.THREE.RGBFormat:e.THREE.RGBAFormat,"boolean"==typeof this.manager.flipY?n._flipY=this.manager.flipY:n._flipY=n.flipY,"boolean"==typeof this.manager.premultiplyAlpha?n._premultiplyAlpha=this.manager.premultiplyAlpha:n._premultiplyAlpha=n.premultiplyAlpha;let h=()=>{let t={};return n.flipY&&(t.imageOrientation="flipY"),n.premultiplyAlpha?t.premultiplyAlpha=n.premultiplyAlpha:t.premultiplyAlpha="none",Object.keys(t).length?t:void 0},p=()=>{let r=new e.THREE.ImageBitmapLoader;r.load=t,r.setOptions(h()),r.load(i,(t=>{n.flipY=!1,n.premultiplyAlpha=!1,m(t)}),void 0,(t=>{o&&o(t),c.manager.itemError(i),c.manager.itemEnd(i)}))};Object.defineProperty(n,"flipY",{set(t){"boolean"==typeof t&&t&&p(),this._flipY=t},get(){return this._flipY}}),Object.defineProperty(n,"premultiplyAlpha",{set(t){this._premultiplyAlpha!==t&&p(),this._premultiplyAlpha=t},get(){return this._premultiplyAlpha}}),e.defaultCanvasTexture?n.image=e.defaultCanvasTexture.image:console.error("defaultCanvasTexture is not ready yet. Consider calling await hijackService.onReady() before loading texture."),void 0===i&&(i=""),void 0!==this.path&&(i=this.path+i);let d=i;i=this.manager.resolveURL(i);var c=this,u=e.cache.get(i);if(void 0===u&&(u=e.cache.get(d)),void 0!==u)return c.manager.itemStart(i),setTimeout((function(){r&&r(u),c.manager.itemEnd(i)}),0),u;e.cache.add(i,n),i!==d&&e.cache.add(d,n);let m=t=>{let s=e.convertImageBitmapToCanvasTexture(t,n);Object.assign(n,s),n.needsUpdate=!0,r&&r(s),c.manager.itemEnd(i)};return fetch(i).then((function(t){return t.blob()})).then((function(t){return void 0===c.options&&(c.options=h()),void 0===c.options?createImageBitmap(t):createImageBitmap(t,c.options)})).then((function(t){m(t)})).catch((function(t){o&&o(t),c.manager.itemError(i),c.manager.itemEnd(i)})),c.manager.itemStart(i),n}}hijackCubeTextureLoader(){var t=this;this.THREE.CubeTextureLoader.prototype.load=function(e,i,r,s){var o=new t.THREE.CubeTexture,n=new t.THREE.ImageBitmapLoader(this.manager);n.setCrossOrigin(this.crossOrigin),n.setPath(this.path);var a=0;function l(t){n.load(e[t],(function(e){o.images[t]=e.image,6==++a&&(o.needsUpdate=!0,i&&i(o))}),void 0,s)}this.manager.flipY=!1;for(var h=0;h<e.length;++h)l(h);return o}}hijackImageUtils(){var t;this.THREE.ImageUtils.getDataURL=function(e){var i;if(self.ImageBitmap&&e instanceof self.ImageBitmap)return e;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)i=e;else{void 0===t&&(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),t.width=e.width,t.height=e.height;var r=t.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=t}return i.toDataURL("image/png")}}convertImageBitmapToCanvasTexture(t,e){if(t instanceof ImageBitmap){if(e){let i=new this.THREE.CanvasTexture(t,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy);return i.orgFormat=e.orgFormat,i.format=e.format,i.internalFormat=e.internalFormat,i.type=e.type,i.offset.copy(e.offset),i.repeat.copy(e.repeat),i.center.copy(e.center),i.matrix.copy(e.matrix),i.generateMipmaps=e.generateMipmaps,i.unpackAlignment=e.unpackAlignment,i.rotation=e.rotation,i.matrixAutoUpdate=e.matrixAutoUpdate,i.encoding=e.encoding,i.minFilter=e.minFilter,i.magFilter=e.magFilter,i.flipY=e.flipY,i.premultiplyAlpha=e.premultiplyAlpha,i.wrapS=e.wrapS,i.wrapT=e.wrapT,i.name=e.name,e.scale&&(i.scale.copy?i.scale.copy(e.scale):i.scale=JSON.parse(JSON.stringify(e.scale))),i.mipmaps=e.mipmaps.slice(0),i.mapping=e.mapping,i.anisotropy=e.anisotropy,i}return new this.THREE.CanvasTexture(t)}return t}hijackApplyMatrix(){this.THREE.Geometry&&this.THREE.Geometry.prototype.applyMatrix4&&(this.THREE.Geometry.prototype.applyMatrix=this.THREE.Geometry.prototype.applyMatrix4),this.THREE.Object3D.prototype.applyMatrix4&&(this.THREE.Object3D.prototype.applyMatrix=this.THREE.Object3D.prototype.applyMatrix4),this.THREE.BufferGeometry.prototype.applyMatrix4&&(this.THREE.BufferGeometry.prototype.applyMatrix=this.THREE.BufferGeometry.prototype.applyMatrix4)}hijackMath(){this.THREE.Math||(this.THREE.Math=this.THREE.MathUtils),this.THREE.MathUtils||(this.THREE.MathUtils=this.THREE.Math)}hijackLightShadows(){let t=this;if(t.THREE.LightShadow||(t.THREE.LightShadow=function(){var e=new t.THREE.Vector3,i=new t.THREE.Vector3,r=new t.THREE.Matrix4;function s(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new t.THREE.Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new t.THREE.Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new t.THREE.Frustum,this._frameExtents=new t.THREE.Vector2(1,1),this._viewportCount=1,this._viewports=[new t.THREE.Vector4(0,0,1,1)]}var o=s.prototype;return o.getViewportCount=function(){return this._viewportCount},o.getFrustum=function(){return this._frustum},o.updateMatrices=function(t){var s=this.camera,o=this.matrix;e.setFromMatrixPosition(t.matrixWorld),s.position.copy(e),i.setFromMatrixPosition(t.target.matrixWorld),s.lookAt(i),s.updateMatrixWorld(),r.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),o.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),o.multiply(s.projectionMatrix),o.multiply(s.matrixWorldInverse)},o.getViewport=function(t){return this._viewports[t]},o.getFrameExtents=function(){return this._frameExtents},o.copy=function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},o.clone=function(){return(new this.constructor).copy(this)},o.toJSON=function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t},s}()),!this.THREE.SpotLightShadow){var e=function(){t.THREE.LightShadow.call(this,new t.THREE.PerspectiveCamera(50,1,.5,500)),this.focus=1};e.prototype=Object.assign(Object.create(t.THREE.LightShadow.prototype),{constructor:e,isSpotLightShadow:!0,updateMatrices:function(e){const i=this.camera,r=2*t.THREE.MathUtils.RAD2DEG*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||i.far;r===i.fov&&s===i.aspect&&o===i.far||(i.fov=r,i.aspect=s,i.far=o,i.updateProjectionMatrix()),t.THREE.LightShadow.prototype.updateMatrices.call(this,e)}}),this.THREE.SpotLightShadow=e}if(!this.THREE.DirectionalLightShadow){var i=function(){t.THREE.LightShadow.call(this,new t.THREE.OrthographicCamera(-5,5,5,-5,.5,500))};i.prototype=Object.assign(Object.create(t.THREE.LightShadow.prototype),{constructor:i,isDirectionalLightShadow:!0,updateMatrices:function(e){t.THREE.LightShadow.prototype.updateMatrices.call(this,e)}}),this.THREE.DirectionalLightShadow=i}if(!this.THREE.PointLightShadow){var r=function(){t.THREE.LightShadow.call(this,new t.THREE.PerspectiveCamera(90,1,.5,500)),this._frameExtents=new t.THREE.Vector2(4,2),this._viewportCount=6,this._viewports=[new t.THREE.Vector4(2,1,1,1),new t.THREE.Vector4(0,1,1,1),new t.THREE.Vector4(3,1,1,1),new t.THREE.Vector4(1,1,1,1),new t.THREE.Vector4(3,0,1,1),new t.THREE.Vector4(1,0,1,1)],this._cubeDirections=[new t.THREE.Vector3(1,0,0),new t.THREE.Vector3(-1,0,0),new t.THREE.Vector3(0,0,1),new t.THREE.Vector3(0,0,-1),new t.THREE.Vector3(0,1,0),new t.THREE.Vector3(0,-1,0)],this._cubeUps=[new t.THREE.Vector3(0,1,0),new t.THREE.Vector3(0,1,0),new t.THREE.Vector3(0,1,0),new t.THREE.Vector3(0,1,0),new t.THREE.Vector3(0,0,1),new t.THREE.Vector3(0,0,-1)]};r.prototype=Object.assign(Object.create(t.THREE.LightShadow.prototype),{constructor:r,isPointLightShadow:!0,updateMatrices:function(t,e=0){const i=this.camera,r=this.matrix,s=this._lightPositionWorld,o=this._lookTarget,n=this._projScreenMatrix;s.setFromMatrixPosition(t.matrixWorld),i.position.copy(s),o.copy(i.position),o.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(o),i.updateMatrixWorld(),r.makeTranslation(-s.x,-s.y,-s.z),n.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n)}}),this.THREE.PointLightShadow=r}}deleteTextGeometry(){delete this.THREE.TextGeometry}}class b{constructor(){this._hasDom=!!self.document}get hasDom(){return this._hasDom}loadScript(t,e,i="text/javascript"){if(this._hasDom){let r=document.createElement("script");r.src=t,r.type=i,e&&r.addEventListener("load",(()=>{e()}),!1),document.getElementsByTagName("body")[0].appendChild(r)}else self.importScripts(t),e&&e()}postToDom(t){try{this.hasDom?self.postMessage({from:s.NL.WORKER,action:t.action,data:t.data,to:t.to},"*"):self.postMessage({from:s.NL.WORKER,action:t.action,data:t.data,to:t.to})}catch(e){console.error(e),console.warn("DomManipulator.postToDom",t.action,t.data)}}bodyClassList(t,e){this.postToDom({action:"body.classList",data:{type:t,className:e},to:s.NL.MAIN,from:s.NL.WORKER})}createCanvas(t,e){let i=this.hasDom?document.createElement("canvas"):new OffscreenCanvas(t,e);return this.hasDom&&(i.setAttribute("width",String(t)),i.setAttribute("height",String(e))),i}appendChildIfDom(t){this.hasDom&&document.body.appendChild(t)}removeChildIfDom(t){this.hasDom&&t.parentElement.removeChild(t)}}i(8595),i(683);class w{constructor(t){this.domManipulator=new b,this.cdn=t}injectAll(t){if(!Element.prototype.matches){let t=Element;t.prototype.matches=t.prototype.msMatchesSelector}let e=0;const i=()=>{0==--e&&(this.isFetchSupported()?t():(e++,this.fixFetch((()=>t()))))};this.isPromiseSupported()||(e++,this.fixPromise((()=>i()))),this.isFindSupported()||(e++,this.fixFind((()=>i()))),this.isTextDecoderSupported()||(e++,this.fixTextDecoder((()=>i()))),this.isIE()&&(e+=3,this.fetchLibrary((()=>i())),this.fetchCoreJs((()=>i())),this.fetchShim((()=>i()))),0===e&&t()}isFetchSupported(){return!!self.fetch}isPromiseSupported(){return!!self.Promise}isFindSupported(){return!!Array.prototype.find}isTextDecoderSupported(){return!!self.TextDecoder}isIE(){return window.navigator.userAgent.indexOf("MSIE")>-1||!!navigator.userAgent.match(/Trident\/7\./)}fixTextDecoder(t){this.loadScripts([`${this.cdn.assetsDomain}hotlink-ok/polyfills/encoding-indexes.js`,`${this.cdn.assetsDomain}hotlink-ok/polyfills/encoding.js`],(()=>{console.log("TextDecoder polyfill injected"),t&&t()}))}fixPromise(t){this.loadScripts([`${this.cdn.assetsDomain}hotlink-ok/polyfills/promise-polyfill.min.js`],(()=>{console.log("Promise polyfill injected"),t&&t()}))}fixFind(t){this.loadScripts([`${this.cdn.assetsDomain}hotlink-ok/polyfills/array_prototype_find.js`],(()=>{console.log("Array.prototype.find polyfill injected"),t&&t()}))}fixFetch(t){this.loadScripts([`${this.cdn.assetsDomain}hotlink-ok/polyfills/fetch.min.js`],(()=>{console.log("fetch polyfill injected"),t&&t()}))}fetchCoreJs(t){this.loadScripts([`${this.cdn.assetsDomain}hotlink-ok/polyfills/core.min.js`],(()=>{console.log("core-js polyfill injected"),t&&t()}))}fetchLibrary(t){this.loadScripts([`${this.cdn.assetsDomain}hotlink-ok/polyfills/library.min.js`],(()=>{console.log("library-js polyfill injected"),t&&t()}))}fetchShim(t){this.loadScripts([`${this.cdn.assetsDomain}hotlink-ok/polyfills/shim.min.js`],(()=>{console.log("shim-js polyfill injected"),t&&t()}))}loadScripts(t,e){let i=0;t.forEach((r=>{this.domManipulator.loadScript(r,(()=>{++i===t.length&&e()}))}))}}class E{constructor(t){this.wrap=t,this.hitTestSourceRequested=!1,this.initIcons()}get stabilizationState(){return this._stabilizationState}set stabilizationState(t){this._stabilizationState=t,this.wrap.toggleStabilizationElem(this._stabilizationState)}get isControlsActive(){return this._isControlsActive}set isControlsActive(t){this._isControlsActive=t,this.wrap.app.xrSession.isControlsActive=this._isControlsActive,this._isControlsActive&&this.setupControls()}get cancelSelect(){return this._cancelSelect}set cancelSelect(t){this._cancelSelect=t}initIcons(){this.xrActions=this.wrap.xrOverlay.querySelector(".xr-actions"),this.exitAr=this.wrap.xrOverlay.querySelector(".xr-actions #xr-exit"),this.posOn=this.wrap.xrOverlay.querySelector(".xr-actions #xr-pos"),this.xrActions.classList.remove("disp-none"),this.exitAr.children[0].setAttribute("src",this.wrap.cdn.exitXrIcon),this.posOn.children[0].setAttribute("src",this.wrap.cdn.posXrIcon),this.exitAr.addEventListener("click",(()=>{this.session&&this.session.end(),this.cancelSelect=!0}),!1),this.posOn.addEventListener("click",(()=>{this.cancelSelect=!0,this.posOn.classList.add("disp-none"),this.wrap.app.xrSession.hitTest=!0,this.wrap.app.wrapScene.visible=!1,this.isControlsActive=!1,this.hitTestSourceForTransientInput=null}),!1)}onXrSession(){return(0,r.mG)(this,void 0,void 0,(function*(){if(this.wrap.stopZoomTutorial(),this.wrap.worker){const t={action:"toggleAR",data:{state:!0},from:s.NL.MAIN,to:s.NL.WORKER};this.wrap.worker.postMessage(t)}else this.wrap.app.xrSession||(yield this.wrap.app.loadXrSession());const t=navigator;let e={requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay"],domOverlay:{root:this.wrap.xrOverlay}};E.LIGHT_PROBE&&e.optionalFeatures.push("light-estimation"),this.wrap.sendPixel("webXrSessionRequested"),t.xr.requestSession("immersive-ar",e).then(this.onSessionStarted.bind(this)),this.wrap.app.xrSession.onBeforeSessionStarted()}))}onSessionStarted(t){return(0,r.mG)(this,void 0,void 0,(function*(){this.wrap.storage.set(E.HAS_SUCCESS,!0),this.wrap.sendPixel("webXrSessionStart"),this.wrap.app.xrSession.hitTest=!0,this.wrap.app.wrapScene.visible=!1,this.cancelSelect=!1,t.addEventListener("end",this.onSessionEnded.bind(this)),this.controller=this.wrap.app.renderer.xr.getController(0),this.controller.addEventListener("select",this.onXRSelect.bind(this)),yield this.wrap.app.xrSession.onSessionStarted(t,this.controller),this.wrap.app.xrSession.toggleState(!0),this.wrap.app.xrSession.onXrSession(this.session),this.stabilizationState=!1,this.wrap.addStabilizationElem(),t.domOverlayState&&(this.wrap.app.utils.configurator&&(this.wrap.app.utils.configurator.sceneButtons=!1),this.wrap.xrOverlay.classList.remove("disp-none")),this.wrap.elements.body.classList.add("ar");let e=this.wrap.app.props.attributes.snow;e&&this.wrap.app.utils.insertParticles(isNaN(parseInt(e))?null:parseInt(e))}))}onXRSelect(){this._cancelSelect?setTimeout((()=>{this._cancelSelect=!1}),500):(this.wrap.app.xrSession.onXRSelect(),this.isControlsActive=!0,this.posOn.classList.remove("disp-none"),this.requestHitTestSourceForTransientInput())}setupControls(){return(0,r.mG)(this,void 0,void 0,(function*(){yield this.wrap.app.xrSession.setupControls()}))}requestHitTestSourceForTransientInput(){this.session.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then((t=>{this.hitTestSourceForTransientInput=t}))}setXrFrame(t){return(0,r.mG)(this,void 0,void 0,(function*(){if(t){let i=this.wrap.app.renderer.xr.getReferenceSpace();if(this.session=this.wrap.app.renderer.xr.getSession(),!1===this.hitTestSourceRequested&&(this.session.requestReferenceSpace(this.wrap.props.attributes.xrReferenceSpace).then((t=>{this.session.requestHitTestSource({space:t}).then((t=>{this.hitTestSource=t}))})),this.session.addEventListener("end",(()=>{this.hitTestSourceRequested=!1,this.hitTestSource=null})),this.hitTestSourceRequested=!0),this.hitTestSource&&this.wrap.app.xrSession.hitTest)this.handleHitTestResults(t.getHitTestResults(this.hitTestSource),i,!1)&&!this.wrap.app.xrSession.isModelVisible&&(this.onXRSelect(),this._cancelSelect=!0);else if(this.hitTestSourceForTransientInput&&this.wrap.app.xrSession.hitTestTransientInput)if(this.wrap.app.xrSession.ignoreNextHitTestTransientInput)this.wrap.app.xrSession.ignoreNextHitTestTransientInput=!1;else{var e=t.getHitTestResultsForTransientInput(this.hitTestSourceForTransientInput);e.length&&(this.handleHitTestResults(e[0].results,i,!0),this.wrap.sendPixel("webXrDrag"))}if(this.wrap.app.xrSession.isModelVisible&&t.getLightEstimate&&E.LIGHT_PROBE){let e=t.getLightEstimate(yield this.session.requestLightProbe());e&&this.wrap.app.xrSession.setLightPrope(e.sphericalHarmonicsCoefficients)}this.wrap.app.addRenderRequests()}}))}handleHitTestResults(t,e,i){if(t.length){var r=t[0];return this.wrap.app.xrSession.setReticleMatrix(r.getPose(e).transform.matrix,!i),this.stabilizationState||(this.stabilizationState=!0),i&&this.wrap.app.wrapScene.position.setFromMatrixPosition(this.wrap.app.xrSession.reticle.matrix),!0}return this.wrap.app.xrSession.setReticleMatrix(null,!i),!1}onSessionEnded(){this.hitTestSourceRequested=!1,this.hitTestSource=null,this.hitTestSourceForTransientInput=null,this.session.removeEventListener("end",this.onSessionEnded.bind(this)),delete this.session,this.wrap.app.xrSession.toggleState(!1),this.wrap.app.xrSession.onSessionEnded(),this.wrap.elements.body.classList.remove("ar"),this.wrap.elements.body.classList.remove("ar-enabled"),this.xrActions.classList.add("disp-none"),this.posOn.classList.add("disp-none"),this.stabilizationState=!0,setTimeout((()=>{this.wrap.onWindowResize()}),500)}}E.LIGHT_PROBE=!1,E.HAS_SUCCESS="HAS_SUCCESS_SESSION",E.HIT_ANGLE_DEG=20;class x{constructor(){this.functions={},this.refreshFunctionsArr()}add(t,e){this.functions[e]=t,this.refreshFunctionsArr()}remove(t){delete this.functions[t],this.refreshFunctionsArr()}refreshFunctionsArr(){this.functionsArr=Object.values(this.functions)||[]}invoke(t,e=[]){t?this.functions[t]?this.functions[t](...e):console.error("EventHandler: No function was found for selector "+t):this.functionsArr.forEach((t=>t(...e)))}}!function(t){t[t.LRGACY_ZOOM=1]="LRGACY_ZOOM",t[t.LRGACY_ROTATE=2]="LRGACY_ROTATE",t[t.INTERACTIVE_ROTATE=3]="INTERACTIVE_ROTATE"}(d||(d={}));var T,S=i(9445),_=i(7571),A=i(637);!function(t){t[t.SCOPE=1]="SCOPE",t[t.EVAL=2]="EVAL"}(T||(T={}));var R=i(4795),L=i(1024),O=["glb","gltf"];class k{constructor(t){this.wrap=t,this.su=new L.y(this.wrap.props)}preloadArrayBuffer(t){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((e,i)=>(0,r.mG)(this,void 0,void 0,(function*(){const i=yield this.innerPreload(t);e(i)}))))}))}loadJson(t,e=(new Date).getTime().toString()){let i=t.substring(t.lastIndexOf("/")).split("."),r=i[i.length-2]+".json?v="+e,s=new XMLHttpRequest;s.responseType="arraybuffer",s.withCredentials=!1,s.overrideMimeType("text/plain"),s.open("GET",t.substring(0,t.lastIndexOf("/"))+r,!0),s.addEventListener("load",(()=>{if(200===s.status||0===s.status){var t=new TextDecoder("utf-8");let e=null;try{e=JSON.parse(t.decode(s.response))}catch(t){}if(e)for(let t in e)(t.indexOf(".glb.br")>-1&&e[t].size&&!this.loadingFileSize||t.indexOf(".glb")>-1&&e[t].size)&&(this.loadingFileSize=1024*e[t].size*1024)}}),!1),s.send(null)}innerPreload(t){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((e,i)=>(0,r.mG)(this,void 0,void 0,(function*(){if(t||(t=yield this.getLoadParams()),t.options&&t.options.type){if(t.options.type=t.options.type.toLowerCase(),O.find((e=>e===t.options.type))){let r=new XMLHttpRequest;const s=t.path;if(t.options.webp&&(t.path=t.path.substring(0,t.path.lastIndexOf("."))+"_webp"+t.path.substring(t.path.lastIndexOf("."))),t.options.gzip)t.path+=".gz";else if(t.options.brotli){t.path+=".br";let e=parseInt(this.wrap.props.attributes.jsonData);(isNaN(e)||1===e)&&(e=(new Date).getTime()),this.loadJson(s,e.toString())}r.responseType="arraybuffer",r.withCredentials=!1,r.overrideMimeType("text/plain"),r.open("GET",t.path,!0),r.addEventListener("load",(()=>{200!==r.status&&0!==r.status||e(r.response)}),!1),r.addEventListener("progress",(t=>{let e=t.total;!e&&t.target&&t.target.getResponseHeader&&(e=parseInt(t.target.getResponseHeader("content-length"))),!e&&this.loadingFileSize&&(e=this.loadingFileSize);var i=Math.ceil(t.loaded/e*100);i=Math.min(100,i),this.wrap.loaderState.setPercentage(i)}),!1),r.addEventListener("error",(()=>{i(),this.wrap.loaderState.toggleLinearActivity(!1)}),!1),r.addEventListener("abort",(()=>{i(),this.wrap.loaderState.toggleLinearActivity(!1)}),!1),this.wrap.loaderState.toggleLinearActivity(!0),r.send(null)}}else e(null)}))))}))}getLoadParams(t={}){return(0,r.mG)(this,void 0,void 0,(function*(){t.loadSlave=!0===t.loadSlave;let e=t.path||this.wrap.props.attributes.load;if(!e)return{path:null,options:t};let i=t.ext||this.su.getFileExtension(e);if(!i)return{path:null,options:t};i=i.toLowerCase(),"gz"===i&&e.indexOf(".glb.")>-1&&(i="glb");let r=this.wrap.props.attributes.gzip;this.su.hasGzipSupport()||(r=!1);let s=this.wrap.props.attributes.br;this.su.hasGzipSupport()||(s=!1);let o=new R.pt;return o.webp=(yield this.su.testWebP())&&this.wrap.props.attributes.webp&&!this.su.isInC3D(),o.gzip=r,o.brotli=s,o.decrypt=this.wrap.props.attributes.decrypt,o.type=i,o.setAsMain=!t.loadSlave,this.su.isValidHttpUrl(e)||(e=decodeURIComponent(e),e="/"===e[0]?this.wrap.cdn.codeDomain+e.substring(1):this.wrap.cdn.codeDomain+e),{path:e,options:o}}))}getFileExtension(t){return t.split(".").pop()}}class M{constructor(t,e){this.setupHUD=()=>{this.container=this._elements.app,this.bindContainerEvents(this.container)},this._elements=t,this._props=e,this._onAppWindowResize=[],this.utilsWrap=new A.Z(this._elements,this.props),this.initCdn(),this._lastViewerInteraction={},this.polyfillService=new w(this.cdn),this.polyfillService.injectAll(this.init.bind(this)),this.xrOverlay=this._elements.xrOverlay,this.applyDynamicCss(),this.loaderState.setDefaultHeight(this._props.attributes.loaderHeight)}initCdn(){this.cdn=new _.U({env:this.getEnv(),isQaMode:this.isQaMode(),isTestMode:this.isTestMode(),domain:`${location.protocol}//${location.host}`,server:this.props.attributes.server})}init(){var t;return(0,r.mG)(this,void 0,void 0,(function*(){if(!window.innerWidth||!window.innerHeight)return void setTimeout((()=>this.init()),1e3);let e=this.getFirefoxVersion();if("number"==typeof e&&e<60)throw`An old version of Firefox (${e}) has been detected, please update your browser!`;this.isZoomTutorialInProgress=!1;const i=this._elements.appCanvas;if(this.mainCanvas=i,this.toggleFullscreenState=!1,this.mouse={},this.lottie=new n(this),this.externalInterfaceWrap=new u(this),this.storage=new c.V,this.raycasterHelperWrap=new v(this,this.mainCanvas),this.cache=new m,this._props.width&&this.props.height||(this.invalidDim=!0),document.addEventListener("visibilitychange",this.onVisibilityChange.bind(this),!1),document.addEventListener("focus",this.onVisibilityChange.bind(this),!1),document.addEventListener("blur",this.onVisibilityChange.bind(this),!1),this.setPreview(this._props.attributes.pv),this.setPreviewText(this._props.attributes.pvtext),this.initPreloader(),!("transferControlToOffscreen"in i)||"boolean"==typeof this.props.attributes.offscreen&&!0!==this.props.attributes.offscreen||this.props.attributes.ar&&(yield this.isXrSupported())||1===this.props.attributes.vto)this._props.canvas=i,this.loadThreeAsync().then((()=>{this.loadScriptAsync(`${this.cdn.modulesDomain}app.bundle.js`).then((t=>(0,r.mG)(this,void 0,void 0,(function*(){t||(t=self.App),this.app=new t(this._props),this.hdriServivceWrap=new g(this),yield this.app.setupS3DControls(),this.loadLoaderServiceWrap(),this.setProps(this._props)}))))}));else{this._props.isWorker=!0;let t=i.transferControlToOffscreen();this._worker=new Worker(URL.createObjectURL(yield this.getBlobByUrl(`${this.cdn.modulesDomain}worker.bundle.js?v=${this._props.version}`))),this._props.canvas=t,this._worker.postMessage({action:"initApp",data:this._props},[t])}window.location.protocol,this.reportBaseUrl=this.cdn.collectorUrl;let o=this._worker||window;this.elements.body.addEventListener("resize",this.onWindowResize.bind(this),!1),this.mainCanvas.addEventListener("mousedown",this.onMouseDown.bind(this),!1),this.mainCanvas.addEventListener("mouseup",this.onMouseUp.bind(this),!1),(null===(t=null===screen||void 0===screen?void 0:screen.orientation)||void 0===t?void 0:t.addEventListener)&&screen.orientation.addEventListener("change",this.onWindowResize.bind(this)),o.addEventListener("message",this.onMessage.bind(this),!1),o!==window&&window.addEventListener("message",this.onMessage.bind(this),!1);var a={action:"viewerListening",to:s.NL.IGNORE,from:s.NL.MAIN};if(this.postToParent(a),"fse"in this._props.attributes&&window.self!==window.top){var l=this._elements.fullscreenToggle;l.setAttribute("src",this.cdn.fullscreenIcon),l.classList.remove("disp-none"),setTimeout((function(){l.classList.add("visible")}),500),l.addEventListener("click",this.toggleFullscreen.bind(this),!1)}this.enterArBtn=this._elements.xrEnter,this.exitArBtn=this._elements.xrExit,this._props.attributes.arGlasses?this.toggleArGlassesButton(!0,s.Rw.EYEWEAR):this._props.attributes.arHeadphones?this.toggleArGlassesButton(!0,s.Rw.HEADPHONES):this._props.attributes.arHelmet&&this.toggleArGlassesButton(!0,s.Rw.HELMET),this.worker&&this._props.attributes.leProbe&&this._props.attributes.hdr&&this.getLightProbeCoefficients(this._props.attributes.hdr,this._props.attributes.hdrBlur,!0),this.isMobile()&&this._elements.body.classList.add("mobile"),this.deployLogo(),this.isInC3D()||this.isLocalhost()||this.isInLocalhost()||(HTMLCanvasElement.prototype.toBlob=()=>{}),window.addEventListener("beforeunload",(t=>{this.sendPixel("viewerEnd")}))}))}get props(){return this._props}get worker(){return this._worker}get previewImage(){return this._previewImage}get elements(){return this._elements}get lastLoadSrc(){return this._lastLoadSrc}get loaderState(){return this._loaderState||(this._loaderState=new o(this)),this._loaderState}get onAppWindowResize(){return this._onAppWindowResize||(this._onAppWindowResize=[]),this._onAppWindowResize}set onAppWindowResize(t){this._onAppWindowResize=t}initPreloader(){return(0,r.mG)(this,void 0,void 0,(function*(){this.preloader||(this.preloader=new k(this));let t=!1;try{let e=yield this.preloader.getLoadParams();if(this._lastLoadSrc===e.path)return t;this._lastLoadSrc=e.path,e.options&&e.options.type&&(e.options.type=e.options.type.toLowerCase(),"glb"!==e.options.type&&"gltf"!==e.options.type||(this._props.suppressLoad=!0,this.preloader.preloadArrayBuffer(e).then(this.preloaderDone.bind(this)),t=!0))}catch(t){delete this._props.overrideAssetAB}return t}))}preloaderDone(t){this.overrideAssetAB=t,this.overrideAssetAB&&this.didSetup&&this.sendModelArrayBuffer()}sendModelArrayBuffer(){if(this.overrideAssetAB){const t={overrideAssetAB:this.overrideAssetAB,ext:"glb"};this.props.isWorker||this.app.load(t),this._worker&&this._worker.postMessage({data:t,action:"load",to:s.NL.WORKER,from:s.NL.MAIN}),delete this.overrideAssetAB}}load(){this.props.isWorker||this.app.load(),this._worker&&this._worker.postMessage({action:"load",to:s.NL.WORKER,from:s.NL.MAIN})}getMinSuffix(){return this.props.debug?"":".min"}isXrSupported(){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((t,e)=>(0,r.mG)(this,void 0,void 0,(function*(){if("boolean"!=typeof this._isXrSupported)try{const e=navigator;e.xr&&e.xr.isSessionSupported?(this._isXrSupported=yield e.xr.isSessionSupported("immersive-ar"),t(this._isXrSupported)):(this._isXrSupported=!1,t(!1))}catch(e){this._isXrSupported=!1,t(!1)}else t(this._isXrSupported)}))))}))}loadThreeAsync(){return(0,r.mG)(this,void 0,void 0,(function*(){yield this.loadScriptAsync(this._props.threeJsPath);const t=window;this.hijackService=new y(t.THREE),this.hijackService.fixVersion()}))}safeParse(t){if("string"==typeof t)try{return JSON.parse(t)}catch(t){}return t}onMessage(t){return(0,r.mG)(this,void 0,void 0,(function*(){const e="object"==typeof t.data?t.data:this.safeParse(t.data);if(e){if(this.props.attributes.frameID&&e.id&&this.props.attributes.frameID!==e.id)return;if(e.to===s.NL.MAIN)if(e.action&&0===e.action.indexOf("ImageManipulations."))this.handleWrapManipulations(e);else if(e.action&&0===e.action.indexOf("LoaderService."))this.handleWrapLoader(e);else if(e.from===s.NL.WORKER)switch(e.action){case"LoaderState.toggleLinearActivity":this.loaderState.toggleLinearActivity(e.data);break;case"LoaderState.setPercentage":this.loaderState.setPercentage(e.data);break;case"body.classList":this._elements.body.classList[e.data.type](e.data.className);break;case"Utils.sendPixel":this.sendPixel(e.data.type,e.data.info);break;case"Utils.downloadBlob":this.downloadBlob(e.data.blob,e.data.filename);break;case"Utils.zoomTutorial":this.zoomTutorial(e.data);break;case"Utils.stopZoomTutorial":this.stopZoomTutorial();break;case"Utils.setBodyClass":this.setBodyClass(e.data.state,e.data.name);break;case"Utils.toggleShowCameraRotation":this.toggleShowCameraRotation(e.data.state,{x:e.data.x,y:e.data.y,z:e.data.z});break;case"Utils.vibrate":this.utilsWrap.vibrate(e.data);break;case"App.setup":this.setup();break;case"App.addStabilizationElem":this.addStabilizationElem();break;case"App.toggleArButtons":this.toggleArButtons(e.data);break;case"App.statsUpdate":this.stats&&this.stats.update();break;case"App.setupTransformControls":this.setupTransformControls(e.data[0],e.data[1]);break;case"App.onModelInteraction":this.onModelInteraction(e.data);break;case"App.onWindowResize":this._onAppWindowResize.forEach((t=>t())),this._onAppWindowResize=[];break;case"FaceTrackHelper.toggleFaceAnimation":this.toggleFaceAnimation(e.data);break;case"HDRIServivce.getLightProbeCoefficients":this.getLightProbeCoefficients(e.data.type,e.data.blur);break;case"RaycasterHelper.toggleState":this.raycasterHelperWrap.toggleState(e.data);break;case"Utils.setGLTFModel":this.exportGLTF(e.data.model,e.data.options);break;case"Utils.setOBJModel":this.exportOBJ(e.data.model,e.data.boundingBox);break;case"Utils.setUSDZModel":this.exportUSDZ(e.data.model,e.data.options);break;case"Utils.stopTutorialPercentage":this.stopTutorialPercentage();break;case"Utils.setTutorialPercentage":this.setTutorialPercentage(e.data.percentage);break;case"onModelLoaded":this.onModelLoaded(e.data);break;case"onGifSequence":this.makeGif(e.data.images,e.data.options);break;case"onWindowInvalidSize":window.innerWidth&&window.innerHeight?(console.warn("onWindowInvalidSize"),setTimeout((()=>{this.onWindowResize()}),500)):console.warn("onWindowInvalidSize",window.innerWidth,window.innerHeight);case"cancelXrSessionSelect":this.cancelXrSessionSelect();break;case"Configurator.deployUI":yield this.loadConfiguratorWrap(),this.configuratorWrap.deployUI(e.data.configurations);break;case"Configurator.setBallState":this.configuratorWrap.setBallState(e.data[0],e.data[1]);break;case"Configurator.currentIndex":this.configuratorWrap.currentIndex=e.data[0];break;case"Configurator.currentFile":this.configuratorWrap?this.configuratorWrap.currentFile=e.data[0]:this.configuratorWrapCurrentFile=e.data[0];break;default:this.parentProxy(e)}else this.externalInterfaceWrap[e.action]&&this.externalInterfaceWrap[e.action](e);else e.to===s.NL.TOP?this._worker&&this.parentProxy(e):e.to===s.NL.WORKER?this._worker&&this._worker.postMessage(t.data):void 0===e.to&&(this.externalInterfaceWrap[e.action]?this.externalInterfaceWrap[e.action](e):this._worker&&this._worker.postMessage(t.data))}this.invalidDim&&this._props.width&&this._props.height&&window.innerWidth&&window.innerHeight&&(this.invalidDim=!1,this._props.width&&this.props.height||(console.warn("fixing invalid dimensions",this._props,window.innerWidth,window.innerHeight),setTimeout((()=>{this.onWindowResize()}),1e3)))}))}cancelXrSessionSelect(){this.xrSessionWrap&&(this.xrSessionWrap.cancelSelect=!0)}downloadBlob(t,e){let i=document.createElement("a");i.href=URL.createObjectURL(t),i.download=e,this.elements.body.appendChild(i),i.click(),setTimeout((()=>{i.parentElement.removeChild(i)}),100)}loadScripts(t,e){let i=0;t.forEach((r=>{this.loadScript(r,(()=>{++i===t.length&&e()}))}))}loadScript(t,e){let i=document.createElement("script");i.src=t,i.type="text/javascript",e&&i.addEventListener("load",(()=>{e()}),!1),document.getElementsByTagName("body")[0].appendChild(i)}loadScriptAsync(t){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((e,i)=>{let r=document.createElement("script");r.src=t,r.type="text/javascript",r.addEventListener("load",(()=>{e()}),!1),document.getElementsByTagName("body")[0].appendChild(r)}))}))}deployLogo(){return(0,r.mG)(this,void 0,void 0,(function*(){if(this.props.env===S.E0.FLIX)return;const t=t=>{let e=document.createElement("a");e.href=t,e.target="_blank",e.className="label-icon",this._elements.body.appendChild(e)},e=this.isC3D();if(e&&!this.isInC3D()){if(window.top===window.self||document.referrer&&(-1===document.referrer.indexOf(".creators3d.com/")||-1===document.referrer.indexOf(".c3dstaging.com/")||-1===document.referrer.indexOf(".c3ddevelopment.com/"))){t("https://www.creators3d.com/home?ref=embed-viewer"),this.sendPixel("embedViewerC3D");var i=document.createElement("style");i.appendChild(document.createTextNode(".label-icon {background-image: url(https://cdn.creators3d.com/hotlink-ok/site/favicon.png);}")),this.elements.body.appendChild(i)}}else if(!e&&this.props.attributes.watermark){let t=document.createElement("div");t.setAttribute("target","_blank"),t.className="watermark label-icon",this._elements.body.appendChild(t);let e={loop:!1,renderer:"svg",container:t,autoplay:!0,path:"https://cdn.hexa3d.io/hotlink-ok/animations/viewer/watermark/data_1.json"},i=yield this.lottie.createAnimation(e),r=!1;i.setDirection(-1);let s=()=>{r||(r=!0,i.setDirection(1),i.play(),setTimeout((()=>{r&&(r=!1,i.setDirection(-1),i.play())}),5e3))};i.wrapper.addEventListener("click",(()=>{s()}),!1)}}))}isInC3D(){return this.utilsWrap.isInC3D()}isC3D(){return this.utilsWrap.isC3D()}isInH3D(){return this.utilsWrap.isInH3D()}isLocalhost(){return this.utilsWrap.isLocalhost()}isInLocalhost(){return this.utilsWrap.isInLocalhost()}isQaMode(){return this.utilsWrap.isQaMode()}isTestMode(){return this.utilsWrap.isTestMode()}get sessionId(){return this.utilsWrap.sessionId}sendPixel(t,e={},i){if(this.isLocalhost())return void("function"==typeof i&&i());0!==(t=t||"").indexOf("viewer")&&(t="viewer"+t);let r={clientTime:e.clientTime||(new Date).getTime(),sessionId:this.props.attributes.sid,viewerSessionId:this.sessionId,referrer:document.referrer,type:e.type};e.progress_percent&&(r.progress_percent=e.progress_percent),e.progress_seconds&&(r.progress_seconds=e.progress_seconds),e.event&&(r.event=e.event);let o={events:{event_type:t,url:window.location.href,info:r,interaction_type:e.interaction_type,source:"viewer"}};if(this.props.env===S.E0.FLIX){let t={action:"sendPixel",data:o,to:s.NL.TOP,from:s.NL.MAIN};this.postToParent(t)}else{let t=new XMLHttpRequest;t.onreadystatechange=()=>{4===t.readyState&&200===t.status&&"function"==typeof i&&i()},t.open("POST",this.reportBaseUrl+"/reports",!0),t.send(JSON.stringify(o))}}getDomain(){return this.utilsWrap.getDomain()}toggleFullscreen(){let t=this.props.attributes.fsexit||`${this.cdn.assetsDomain}hotlink-ok/viewer/ic_fullscreen_exit_black_48dp_1x.png`,e=this.props.attributes.fsenter||`${this.cdn.assetsDomain}hotlink-ok/viewer/ic_fullscreen_black_48dp_1x.png`,i={action:"toggleFullscreen",to:s.NL.TOP,from:s.NL.MAIN},r=this._elements.fullscreenToggle;this.toggleFullscreenState?(i.obj={state:"close"},r.src=e):(i.obj={state:"open"},r.src=t),this.toggleFullscreenState=!this.toggleFullscreenState,this.postToParent(i)}postToParent(t){const e=t.to===s.NL.TOP&&t.from&&t.from!==s.NL.TOP;(window.parent&&window.top!==window.self||e)&&(t.id=this.props.attributes.frameID,window.parent.postMessage(t,document.referrer||`${location.protocol}//${location.host}`))}onModelLoaded(t=!1){if(this.setBodyClass(!0,"loaded"),!this.modelLoadedOnce){if(this.modelLoadedOnce=!0,t){let t={action:"viewerFullyLoaded",to:s.NL.IGNORE,from:s.NL.MAIN};this.postToParent(t)}let e={action:"onModelLoaded",data:t,to:s.NL.IGNORE,from:s.NL.MAIN};this.postToParent(e),this.parseURL(),this._props.attributes.embedLoader&&!this._props.attributes.load&&this.initEmbedLoader()}}toggleVTO(t,e){return(0,r.mG)(this,void 0,void 0,(function*(){switch(t){case s.Rw.EYEWEAR:case s.Rw.HEADPHONES:case s.Rw.HELMET:yield this.toggleEyewearVTO(e,t)}}))}toggleEyewearVTO(t,e){return(0,r.mG)(this,void 0,void 0,(function*(){if(t){if(this._worker){const t={data:{type:e,state:!0},action:"toggleVTO",to:s.NL.WORKER};this._worker.postMessage(t)}else this.app.utils.toggleVTO(e,!0);this.evto||(yield this.loadEyewearVTOCtor(),this.evto=new this.HeadtrackVTOWrapCtor(this))}else{if(this._worker){const t={data:{type:e,state:!1},action:"toggleVTO",to:s.NL.WORKER};this._worker.postMessage(t)}else this.app.utils.toggleVTO(e,!1);this.elements.body.classList.remove("flip-y")}}))}loadEyewearVTOCtor(){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((t,e)=>(0,r.mG)(this,void 0,void 0,(function*(){i.e(5098).then(i.bind(i,5098)).then((e=>{this.HeadtrackVTOWrapCtor=e.HeadtrackVTOWrap||e.default,t()}))}))))}))}toggleFaceAnimation(t){if(!this.faceAnimation){this.faceAnimation=document.createElement("div"),this.faceAnimation.className="face-detection",this.elements.body.appendChild(this.faceAnimation);let t={loop:!0,renderer:"svg",container:this.faceAnimation,autoplay:!0,path:"https://cdn.hexa3d.io/hotlink-ok/animations/viewer/face_detection/data.json"};this.lottie.createAnimation(t)}this.faceAnimation.style.display=t?"":"none"}toggleArButtons(t){t?(this.enterArBtn.style.display="inline",this.exitArBtn.style.display="none"):(this.enterArBtn.style.display="none",this.exitArBtn.style.display="inline")}toggleArGlassesButton(t,e){return(0,r.mG)(this,void 0,void 0,(function*(){t?(this.elements.body.classList.add("ar-enabled"),this.elements.body.classList.add("ar-glasses-active"),this.isArGlassesInit||(this.isArGlassesInit=!0,this.enterArBtn.children[0].setAttribute("src",this.cdn.glassesTryIcon),this.enterArBtn.addEventListener("click",(()=>{this.toggleVTO(e,!0),this.elements.body.classList.add("ar")}),!1),this.exitArBtn.children[0].setAttribute("src",this.cdn.exitArIcon),this.exitArBtn.addEventListener("click",(()=>{this.toggleVTO(e,!1),this.elements.body.classList.remove("ar")}),!1))):(this.elements.body.classList.remove("ar-enabled"),this.toggleFaceAnimation(!1))}))}toggleShowCameraRotation(t,e){if(t){if(!this.showCameraRotation){this.showCameraRotation=document.createElement("div"),this.showCameraRotation.className="camera-rotation";let t=document.createElement("span");t.className="x deg",this.showCameraRotation.appendChild(t);let e=document.createElement("span");e.className="y deg",this.showCameraRotation.appendChild(e);let i=document.createElement("span");i.className="z deg",this.showCameraRotation.appendChild(i),this.elements.body.appendChild(this.showCameraRotation)}this.showCameraRotation.querySelector(".x").textContent="x: "+e.x,this.showCameraRotation.querySelector(".y").textContent="y: "+e.y,this.showCameraRotation.querySelector(".z").textContent="z: "+e.z}else this.showCameraRotation&&(this.showCameraRotation.parentElement.removeChild(this.showCameraRotation),delete this.showCameraRotation)}displayFile(t){return(0,r.mG)(this,void 0,void 0,(function*(){this.filesLoaderWrap||(yield this.loadFilesLoaderWrap()),this.filesLoaderWrap.onDrop({dataTransfer:{items:t}})}))}loadFilesLoaderWrap(){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((t,e)=>{i.e(2706).then(i.bind(i,2706)).then((e=>{const i=e.FilesLoaderWrap||e.default;this.filesLoaderWrap=new i(this),t()}))}))}))}initEmbedLoader(){return(0,r.mG)(this,void 0,void 0,(function*(){if(this.embedLoaderInit)return;this.embedLoaderInit=!0,this.filesLoaderWrap||(yield this.loadFilesLoaderWrap()),this.elements.body.classList.add("drop-files"),this.elements.embed.addEventListener("dragover",(t=>{t.preventDefault()})),this.elements.body.addEventListener("dragover",(t=>{t.preventDefault()})),this.elements.embed.addEventListener("dragenter",(t=>{t.preventDefault()})),this.elements.body.addEventListener("dragenter",(t=>{t.preventDefault()}));let t=t=>{t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.filesLoaderWrap.onDrop(t)};this.elements.embed.addEventListener("drop",(e=>{t(e)}),!1),this.elements.body.addEventListener("drop",(e=>{t(e)}),!1),this.elements.embed.addEventListener("change",(e=>{t(e)}),!1)}))}setProps(t){let e=!1;if(this._props&&t.attributes&&this._props.attributes.server!==t.attributes.server&&(e=!0),Object.assign(this._props,t),e&&this.initCdn(),this.toggleStats(this._props.attributes.stats),this._worker){delete t.canvas;const e={action:"setProps",value:{props:t},to:s.NL.WORKER,from:s.NL.MAIN};this._worker.postMessage(e)}else this.app&&this.app.setProps(t)}isMobile(){return this.utilsWrap.isMobile()}isAndroid(){return this.utilsWrap.isAndroid()}isIOS(){return this.utilsWrap.isIOS()}isEdgeNoChromium(){return this.utilsWrap.isEdgeNoChromium()}isIE(){return this.utilsWrap.isIE()}isOperaMini(){return this.utilsWrap.isOperaMini()}isBaidu(){return this.utilsWrap.isBaidu()}hasGzipSupport(){return this.utilsWrap.hasGzipSupport()}getFirefoxVersion(){return this.utilsWrap.getFirefoxVersion()}generateUUID(){return this.utilsWrap.generateUUID()}parseURL(){if(this._props.attributes.gifgen){this.injectGifgenScript();var t={ggInterval:this._props.attributes.gginterval,ggNumOfFrames:this._props.attributes.ggnumofframes,ggWidth:this._props.attributes.ggwidth,ggHeight:this._props.attributes.ggheight,ggSampleInterval:this._props.attributes.ggsampleInterval,ggRotateSpeen:this._props.attributes.ggrotatespeen};if(this._worker){const e={action:"broadcastGifSequence",data:{options:t},from:s.NL.MAIN,to:s.NL.WORKER};this._worker.postMessage(e)}else this.app.utils.broadcastGifSequence(t)}this._props.attributes.stats&&this.toggleStats(!0),this._props.attributes.ar&&this.props.threeJsRevision>=112&&this.initAr()}initAr(){return(0,r.mG)(this,void 0,void 0,(function*(){(yield this.isXrSupported())&&(this.enterArBtn.children[0].setAttribute("src",this.cdn.enterArIcon),this.exitArBtn.children[0].setAttribute("src",this.cdn.exitArIcon),this.enterArBtn.addEventListener("click",this.onEnterAR.bind(this)),this._elements.body.classList.add("ar-enabled"),this.xrOverlay.classList.remove("disp-none"))}))}toggleAr(t){return(0,r.mG)(this,void 0,void 0,(function*(){if(t)return yield this.initAr();this._elements.body.classList.remove("ar-enabled"),this.xrOverlay.classList.add("disp-none"),(yield this.isXrSupported())&&(this.enterArBtn.children[0].setAttribute("src",this.cdn.enterArIcon),this.exitArBtn.children[0].setAttribute("src",this.cdn.exitArIcon),this.enterArBtn.addEventListener("click",this.onEnterAR.bind(this)),this._elements.body.classList.add("ar-enabled"),this.xrOverlay.classList.remove("disp-none"))}))}toggleStats(t){return(0,r.mG)(this,void 0,void 0,(function*(){if(t){let t=window;t.Stats||(yield this.loadScriptAsync(this.cdn.modulesDomain+"third-party/libs/stats.min.js")),this.stats?this.stats.dom.style.display="":(this.stats=new t.Stats,this.isInC3D()&&(this.stats.dom.style.left="",this.stats.dom.style.right="0px"),this._elements.body.appendChild(this.stats.dom))}else this.stats&&(this.stats.dom.style.display="none")}))}getBlobByUrl(t){return(0,r.mG)(this,void 0,void 0,(function*(){return(yield fetch(t)).blob()}))}makeGif(t,e){let i;try{i=new Blob([this.gifWorkerStr],{type:"application/javascript"})}catch(t){const e=window;e.BlobBuilder=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder,i=new e.BlobBuilder,i.append(this.gifWorkerStr),i=i.getBlob()}let r=new GIF({workers:2,quality:1,width:1*e.ggWidth,height:1*e.ggHeight,background:"#000",transparent:"rgba(0,0,0,0)",workerScript:URL.createObjectURL(i)}),o=t.length;for(let e=0;e<t.length;e++){let i=new Image;i.crossOrigin="anonymous",i.onload=()=>{r.addFrame(i,{delay:100}),0==--o&&r.render()},this._elements.body.appendChild(i),i.src=t[e]}r.on("finished",(t=>{let e=new FileReader;e.onloadend=()=>{let t={image:e.result,callback:"gifgen",action:"gifgen",modelUrl:window.location.href,to:s.NL.TOP,from:s.NL.MAIN};console.log("gif finished"),this.postToParent(t)},e.readAsDataURL(t)}))}injectGifgenScript(){let t=document.createElement("script");t.src="https://cdn.hexa3d.io/hotlink-ok/scripts/gif.js",t.type="text/javascript",this._elements.body.appendChild(t);let e=new XMLHttpRequest;e.onreadystatechange=()=>{4===e.readyState&&200===e.status&&(this.gifWorkerStr=e.responseText)},e.open("GET","//cdn.hexa3d.io/hotlink-ok/scripts/gif.worker.js",!0),e.send()}getTutorialElementByType(t){switch(t){case d.LRGACY_ZOOM:return this._elements.zoomTutorial.classList.add("t-2"),this._elements.zoomTutorial;case d.LRGACY_ROTATE:return this._elements.rotateTutorial.classList.add("t-1"),this._elements.rotateTutorial;case d.INTERACTIVE_ROTATE:return this._elements.rotateTutorial.classList.add("t-3"),this._elements.rotateTutorial}}setTutorialPercentage(t){this.isZoomTutorialInProgress&&this.activeTutorialElement&&(t/=2,this.activeTutorialElement.style.left=`calc(50% - ${t}px)`,this.activeTutorialElement.style.top=`calc(50% - ${t}px)`)}stopTutorialPercentage(){this.isZoomTutorialInProgress&&this.activeTutorialElement&&(this.isZoomTutorialInProgress=!1,this.activeTutorialElement.classList.remove("active"),setTimeout((()=>{this.activeTutorialElement.classList.remove("visible")}),3e3))}zoomTutorial(t){if(!this.isZoomTutorialInProgress){if(t.find((t=>t===d.INTERACTIVE_ROTATE))&&(this.activeTutorialElement=this.getTutorialElementByType(d.INTERACTIVE_ROTATE),this.activeTutorialElement)){if(this.isZoomTutorialInProgress=!0,this._worker){const t={action:"startZoomTutorial",to:s.NL.WORKER,from:s.NL.MAIN};this._worker.postMessage(t)}else this.app.utils.zoomTutorial(t);this.activeTutorialElement.classList.add("visible"),setTimeout((()=>{this.activeTutorialElement.classList.add("active")}),100)}if(t.find((t=>t===d.LRGACY_ROTATE||t===d.LRGACY_ZOOM))){let e=[];if(t.forEach((t=>e.push(this.getTutorialElementByType(t)))),!e.length)return;this.isZoomTutorialInProgress=!0;let i=0,r=()=>{e[i].classList.add("active"),e[i].classList.add("visible");let t=1450;this.firstTutorial||(this.firstTutorial=!0,t=1950),setTimeout((()=>{e[i]?(e[i].classList.remove("active"),e[i].classList.remove("visible"),e[i+1]?(e[i+1].classList.add("active"),e[i+1].classList.add("visible"),setTimeout((()=>{e[i+1].classList.remove("active"),e[i+1].classList.remove("visible"),i++,r()}),1500)):this.isZoomTutorialInProgress=!1):this.isZoomTutorialInProgress=!1}),t)};r()}this.didZoomTutorial||this.storage.set("views",this.props.numOfTutorialViews+1),this.didZoomTutorial=!0}}stopZoomTutorial(){this.isZoomTutorialInProgress&&(this.isZoomTutorialInProgress=!1,this._elements.zoomTutorial.classList.remove("active"),this._elements.rotateTutorial.classList.remove("active"))}toggleXr(t,e,i){return(0,r.mG)(this,void 0,void 0,(function*(){i?this._elements.body.classList.add("suppress-ar-icon"):this._elements.body.classList.remove("suppress-ar-icon");let r={state:t,action:"onBeforeXrSession",to:s.NL.TOP,from:s.NL.MAIN};if(this.postToParent(r),yield this.toggleAr(t),e){t?this.onEnterAR():this.exitArBtn.click();var o={action:"onToggleXr",data:t,to:s.NL.TOP,from:s.NL.MAIN};this.postToParent(o)}}))}onEnterAR(){return(0,r.mG)(this,void 0,void 0,(function*(){if(this._worker){const t={action:"toggleAR",data:{state:!0},to:s.NL.WORKER,from:s.NL.MAIN};this._worker.postMessage(t)}else this.xrSessionWrap||(this.xrSessionWrap=new E(this)),yield this.xrSessionWrap.onXrSession(),this.app.onXrFrame||(this.app.onXrFrame=new x,this.app.onXrFrame.add((t=>{this.xrSessionWrap.setXrFrame(t)}),"render"))}))}setup(){this.setupHUD(),this.setupS3DControls(),this.workerReady=!0,this.didSetup=!0,this.overrideAssetAB&&this.sendModelArrayBuffer()}setupS3DControls(){this.orbitControlsWrap=new a(this,this.mainCanvas,this._worker||window)}setupTransformControls(t="#app",e){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((r,s)=>{if(this.transformControlsWrap)return void r();const o=i=>{const s=i.TransformControlsWrap||i.default;this.transformControlsWrap=new s(this,this.elements.body.querySelector(t),this._worker||window),this.transformControlsWrap.rotateMode=e,r()};this.props.threeJsRevision>=131?i.e(7038).then(i.bind(i,7038)).then((t=>{o(t)})):i.e(3686).then(i.bind(i,3686)).then((t=>{o(t)}))}))}))}onModelInteraction(t){let e,i=!0;if(e=this._previewImage&&!this.modelLoadedOnce?"Loader":"3D",self.event&&self.event.target){let t=self.event.target;t.id&&t.id.indexOf("variant_")>-1&&(i=!1)}if(i){if(this._worker){const t={action:"onModelInteraction",data:!1,to:s.NL.WORKER};this._worker.postMessage(t)}else this.app&&this.app.utils.onModelInteraction();const e={action:"onModelInteraction",data:{type:t},to:s.NL.TOP,from:s.NL.MAIN};e.obj=e.data,this.postToParent(e)}const r=(new Date).getTime(),o=()=>{this.sendPixel("viewerInteraction",{type:t,interaction_type:e,event:"interaction"}),this._lastViewerInteraction[t]=r};this._lastViewerInteraction[t]?this.isAboveTS(r,this._lastViewerInteraction[t],2e3)&&o():o(),this.stopZoomTutorial()}bindContainerEvents(t){t.querySelector("canvas").addEventListener("webglcontextlost",(t=>{this.sendPixel("webglcontextlost"),setTimeout((()=>{window.location.reload(!0)}),500)}),!1),this.sendPixel("viewerStart")}addStabilizationElem(){const t=M.STABILIZATION;if(!document.getElementById(t)){let e=document.createElement("div");e.id=t,this.xrOverlay.appendChild(e)}}toggleStabilizationElem(t){t?this.elements.body.classList.add("stabilized"):this.elements.body.classList.remove("stabilized")}onWindowResize(){const t=this.elements.body.getBoundingClientRect();if(this._props.width=t.width,this._props.height=t.height,this._props.pixelRatio=window.devicePixelRatio||1,!this.props.isWorker&&this.app){let t=this.mainCanvas;t.width=this._props.width,t.height=this._props.height,this.app.onWindowResize({width:this.mainCanvas.width,height:this.mainCanvas.height,pixelRatio:this._props.pixelRatio,canvas:"transferControlToOffscreen"in this.mainCanvas?this._props.canvas:null})}this._worker&&this._worker.postMessage({action:"onWindowResize",data:{width:this._props.width,height:this._props.height,pixelRatio:this._props.pixelRatio}}),this.evto&&this.evto.onResize()}updateMouse(t){this.mouse.x=t.clientX/window.innerWidth,this.mouse.y=t.clientY/window.innerHeight}onMouseDown(t){this.updateMouse(t)}onMouseUp(t){this.updateMouse(t)}parentProxy(t){t.proxy||(t.proxy=!0,this.postToParent(t))}isThreeLoaded(){return!!window.THREE}isAboveTS(t,e,i){return t-e>i}getFileFromPath(t){return t.split("/").pop()}getFileExtension(t){return t.split(".").pop()}loadImageManipulationsWrap(){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((t,e)=>{i.e(1541).then(i.bind(i,1541)).then((e=>{this.imageManipulationsWrap=new e.default(this),t()}))}))}))}handleWrapManipulations(t){return(0,r.mG)(this,void 0,void 0,(function*(){t.action||console.warn("WrapManager: unknown action in message (2)",t);let e={action:"resolveManipulationsFromDom",data:{action:t.action.replace("ImageManipulations.",""),ts:t.data.ts,result:null},to:s.NL.WORKER,from:s.NL.MAIN};if("textureLoader"===e.data.action&&!this.isThreeLoaded())return yield this.loadThreeAsync(),void(yield this.handleWrapManipulations(t));this.imageManipulationsWrap||(yield this.loadImageManipulationsWrap());const i=this.imageManipulationsWrap;e.data.result=yield i[e.data.action](...t.data.params),this._worker?this._worker.postMessage(e):this.app.utils.imageManipulations.resolveFromDom(e)}))}handleWrapLoader(t){return(0,r.mG)(this,void 0,void 0,(function*(){this.loadLoaderServiceWrap().then((()=>{if(t.action){const e=t.action.replace("LoaderService.","");this.loaderServiceWrap[e](...t.data)}else console.warn("WrapManager: unknown action in message",t)}))}))}loadExportWrap(){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((t,e)=>{this.exporterWrap?t():i.e(7661).then(i.bind(i,7661)).then((e=>{const i=e.ExporterWrap||e.default;this.exporterWrap=new i(this),t()}))}))}))}exportGLTF(t,e,i){return(0,r.mG)(this,void 0,void 0,(function*(){return this.isThreeLoaded()||(yield this.loadThreeAsync()),this.imageManipulationsWrap||(yield this.loadImageManipulationsWrap()),yield this.loadExportWrap(),this.exporterWrap.exportGLTF(t,e,i)}))}exportUSDZ(t,e,i){return(0,r.mG)(this,void 0,void 0,(function*(){return this.isThreeLoaded()||(yield this.loadThreeAsync()),this.imageManipulationsWrap||(yield this.loadImageManipulationsWrap()),yield this.loadExportWrap(),this.exporterWrap.exportUSDZ(t,e,i)}))}exportOBJ(t,e){return(0,r.mG)(this,void 0,void 0,(function*(){return this.isThreeLoaded()||(yield this.loadThreeAsync()),yield this.loadExportWrap(),this.exporterWrap.exportOBJ(t,e)}))}loadLoaderServiceWrap(){return new Promise(((t,e)=>{this.loaderServiceWrap?t():this.isThreeLoaded()?Promise.all([i.e(7752),i.e(1089)]).then(i.bind(i,1089)).then((e=>{this.loaderServiceWrap=new e.default(this),t()})):this.loadThreeAsync().then((()=>{Promise.all([i.e(7752),i.e(1089)]).then(i.bind(i,1089)).then((e=>{this.loaderServiceWrap=new e.default(this),t()}))}))}))}getLightProbeCoefficients(t,e,i=!1){this.isThreeLoaded()&&this.hdriServivceWrap?this.hdriServivceWrap.getLightProbeCoefficients(t,e,i):this.isThreeLoaded()?(this.hdriServivceWrap=new g(this),this.hdriServivceWrap.getLightProbeCoefficients(t,e,i)):this.loadThreeAsync().then((()=>{this.hdriServivceWrap=new g(this),this.hdriServivceWrap.getLightProbeCoefficients(t,e,i)}))}requestAnimationFrame(){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((t,e)=>{requestAnimationFrame((()=>{t()}))}))}))}setTimeout(t){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((e,i)=>{setTimeout((()=>{e()}),t)}))}))}setBodyClass(t,e){return(0,r.mG)(this,void 0,void 0,(function*(){this._elements.body.classList[t?"add":"remove"](e),yield this.requestAnimationFrame(),yield this.setTimeout();let i=`${e}:${t}`;if(this._worker){const t={data:{value:i},action:"onBodyClassDone",to:s.NL.WORKER};this._worker.postMessage(t)}else this.app.utils.onBodyClassDone(i)}))}setExposure(t){if(this._worker){const e={data:{value:t},action:"setExposure",to:s.NL.WORKER};this._worker.postMessage(e)}else this.app.utils.setExposure(t)}fixModelPivot(t){if(this._worker){const e={data:{value:t},action:"fixModelPivot",to:s.NL.WORKER};this._worker.postMessage(e)}else this.app.utils.fixModelPivot(t)}getBoundingBox(t){if(!t){var e=new THREE.Box3;let t=new THREE.Vector3;return e.getSize(t),t}e=(new THREE.Box3).setFromObject(t);let i=new THREE.Vector3;return e.getSize(i),i}testWebP(){return(0,r.mG)(this,void 0,void 0,(function*(){return yield this.utilsWrap.testWebP()}))}setPreview(t){if(this._previewImage=t,this._previewImage){let t=this.elements.preloadImg,e=this.elements.preloadImgOpacity;t.setAttribute("src",this._previewImage),e.setAttribute("src",this._previewImage)}else this.elements.preloadImgWrap.style.display="none"}setPreviewText(t){this._previewText=t,this._previewText&&(this.elements.preloadPreviewText.textContent=this._previewText)}isDocHidden(){return this.utilsWrap.isDocHidden()}onVisibilityChange(){this.setProps({isBlur:this.isDocHidden()})}loadConfiguratorWrap(){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((t,e)=>{this.configuratorWrap?t():i.e(676).then(i.bind(i,676)).then((e=>{const i=e.ConfiguratorWrap||e.default;this.configuratorWrap=new i(this),this.configuratorWrapCurrentFile&&(this.configuratorWrap.currentFile=this.configuratorWrapCurrentFile),delete this.configuratorWrapCurrentFile,t()}))}))}))}getEnv(t=location.host){return this.utilsWrap.getEnv(t)}applyDynamicCss(){const t="dynamic-stylesheet";let e=this._elements.body.querySelector(`#${t}`);e&&e.parentElement&&e.parentElement.removeChild(e),e=document.createElement("style"),e.setAttribute("id",t);let i=`body::after {content: url(' ${this.cdn.assetsDomain}hotlink-ok/icons/rotate_tutorial.png') url(' ${this.cdn.assetsDomain}hotlink-ok/icons/zoom_tutorial.png') url(' ${this.cdn.assetsDomain}hotlink-ok/icons/rotate_tutorial_desktop.gif') url(' ${this.cdn.assetsDomain}hotlink-ok/icons/zoom_tutorial_desktop.gif') url(' ${this.cdn.assetsDomain}hotlink-ok/viewer/touch.png');display: none;}`;i+=`#stabilization {background-image: url(${this.cdn.assetsDomain}hotlink-ok/viewer/stabilization.gif);}`,i+=`.tutorial.rotate.t-1 {background-image: url('${this.cdn.assetsDomain}hotlink-ok/icons/rotate_tutorial_desktop.gif');}`,i+=`.tutorial.zoom.t-2 {background-image: url('${this.cdn.assetsDomain}hotlink-ok/icons/zoom_tutorial_desktop.gif');}`,i+=`.tutorial.t-3.rotate {background-image: url('${this.cdn.assetsDomain}hotlink-ok/viewer/touch.png');}`,i+=`html[lang="fr"] .tutorial.rotate.t-1 {background-image: url('${this.cdn.assetsDomain}hotlink-ok/viewer/icons/fr/rotate_tutorial_desktop.png');}`,i+=`body.mobile .tutorial.zoom.t-2 {background-image: url('${this.cdn.assetsDomain}hotlink-ok/icons/zoom_tutorial.png');}`,i+=`body.mobile .tutorial.rotate.t-1 {background-image: url('${this.cdn.assetsDomain}hotlink-ok/icons/rotate_tutorial.png');}`,i+=`html[lang="fr"] body.mobile .tutorial.rotate.t-1 {background-image: url('${this.cdn.assetsDomain}hotlink-ok/viewer/icons/fr/rotate_tutorial.png');}`,i+=`.texture-video-play {background-image: url('${this.cdn.assetsDomain}hotlink-ok/viewer/baseline_play_circle_outline_black_18dp.png');}`,e.appendChild(document.createTextNode(i)),this._elements.body.appendChild(e)}appendDynamicElement(t,e,i="body"){i=i||"body";let r=this.utilsWrap.jsonToHtml(t);e.forEach((t=>{(t.selector?r.querySelectorAll(t.selector)[t.index||0]:r).addEventListener(t.listen,(e=>{if(t.actionType!==T.SCOPE)throw"WrapManager.appendDynamicElement: only EventSelectorActionType.SCOPE is allowed";{let i=this;t.parameters=t.parameters||[],t.parameters.push(e),i[t.action](...t.parameters)}}),!1)})),this._elements.body.querySelector(i).appendChild(r)}addRenderRequests(t=1){this._worker?this._worker.postMessage({data:{add:t},action:"addRenderRequests",to:s.NL.WORKER,from:s.NL.MAIN}):this.app.addRenderRequests(t)}}M.DEBUG=!1,M.STABILIZATION="stabilization"},1024:(t,e,i)=>{"use strict";i.d(e,{y:()=>s});var r=i(9312);class s{constructor(t){this._props=t}getUrlParams(t){let e={},i="";t?t.indexOf("?")>-1&&(i=decodeURIComponent(decodeURIComponent(t.substring(t.indexOf("?")+1)))):i=window.location.href.indexOf("?")>-1?decodeURIComponent(decodeURIComponent(window.location.href.substring(window.location.href.indexOf("?")+1))):decodeURIComponent(decodeURIComponent(window.location.search.substring(1))),i=i.split("+").join(" ");let r=i.split("&");for(let t=0;t<r.length;t++){let i=r[t].split("=");if(void 0===e[i[0]])e[i[0]]=i[1]?decodeURIComponent(i[1]):null;else if("string"==typeof e[i[0]]){let t=[e[i[0]],decodeURIComponent(i[1])];e[i[0]]=t}else e[i[0]].push(decodeURIComponent(i[1]))}return e}isEdgeNoChromium(){return window.navigator.userAgent.indexOf("Edge")>-1}isIE(){return!!window.document.documentMode}isOperaMini(){return navigator.userAgent.indexOf("Opera Mini")>-1}isBaidu(){return navigator.userAgent.indexOf(" (Baidu; ")>-1}hasGzipSupport(){let t=!this.isOperaMini();return t&&(t=!this.isEdgeNoChromium()),t&&(t=!this.isBaidu()),t&&(t=!this.isIE()),t&&(t=!this.isFacebook()),t}getFileExtension(t){return t.split(".").pop()}isFalse(t){return"0"===t||"false"===t}isInC3D(){return!!document.referrer&&(document.referrer.indexOf(".creators3d.com/")>-1||document.referrer.indexOf(".c3dstaging.com/")>-1||document.referrer.indexOf(".c3ddevelopment.com/")>-1)}isIOS(){var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;t.length;)if(navigator.platform===t.pop())return!0;return!1}isSafari(){return/apple/i.test(navigator.vendor)}testWebP(){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((t,e)=>{const i=()=>{t(this._testWebP)};if(void 0===this._testWebP){if(!this.hasGzipSupport())return this._testWebP=!1,void i();if(this.isIOS()||this.isSafari())return this._testWebP=!1,void i();if(this.isEdgeNoChromium())return this._testWebP=!1,void i();var r=new Image;r.onload=r.onerror=()=>{this._testWebP=2===r.height,i()},r.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}else i()}))}))}isFacebook(){return!!(window.navigator.userAgent.match("FBSN")&&window.navigator.userAgent.match("FBSV")||window.navigator.userAgent.match("FB_IAB"))}fixProtocol(t){return"blob:"!==location.protocol||!t||0!==t.indexOf("//")&&0!==t.indexOf("blob://")||(t=t.replace("blob://","//"),t=(this._props.isLocalhost?"http:":"https:")+t),t}isValidHttpUrl(t){let e;try{e=new URL(t)}catch(t){return!1}return"http:"===e.protocol||"https:"===e.protocol}}},8426:(t,e,i)=>{"use strict";i.d(e,{V:()=>r});class r{constructor(){}has(t){try{return window.localStorage.hasOwnProperty(t)}catch(t){}}set(t,e){try{window.localStorage.setItem(t,JSON.stringify(e))}catch(t){}}get(t){try{let e=window.localStorage.getItem(t);try{return JSON.parse(e)}catch(t){return e}}catch(t){}}clear(){try{window.localStorage.clear()}catch(t){}}remove(t){window.localStorage.removeItem(t)}isSupported(){try{let t="_test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}}catch(t){}}}},637:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var r=i(9312),s=i(1024),o=i(9445);class n{constructor(t,e){this._elements=t,this._props=e,this.su=new s.y(this._props)}testWebP(){return(0,r.mG)(this,void 0,void 0,(function*(){return yield this.su.testWebP()}))}isMobile(){let t=!1;const e=window;var i;return i=navigator.userAgent||navigator.vendor||e.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4)))&&(t=!0),t}isAndroid(){return navigator.userAgent.toLowerCase().indexOf("android")>-1}isIOS(){return this.su.isIOS()}isEdgeNoChromium(){return this.su.isEdgeNoChromium()}isIE(){return this.su.isIE()}isOperaMini(){return this.su.isOperaMini()}isBaidu(){return this.su.isBaidu()}hasGzipSupport(){return this.su.hasGzipSupport()}getFirefoxVersion(){let t=(r=(i=navigator.userAgent).match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(r[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(i)||[])[1]||""):"Chrome"===r[1]&&null!=(e=i.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=i.match(/version\/(\d+)/i))&&r.splice(1,1,e[1]),r.join(" ")));var e,i,r;if(t){let e=t.split(" ");if("Firefox"===e[0])return parseFloat(e[1])}return null}generateUUID(){var t=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)}))}jsonToHtml(t){var e=document.createElement(t.type);for(var i in t.attrs)e.setAttribute(i,t.attrs[i]);for(var i in t.children){var r=null;((r="#text"===t.children[i].type?document.createTextNode(t.children[i].text):this.jsonToHtml(t.children[i]))&&r.tagName&&"undefined"!==r.tagName.toLowerCase()||3===r.nodeType)&&e.appendChild(r)}return e}vibrate(t){try{const e=navigator,i=navigator.vibrate||e.webkitVibrate||e.mozVibrate||e.msVibrate;i&&i.vibrate(t)}catch(t){}}getUrlParams(t){return this.su.getUrlParams(t)}getFileExtension(t){return this.su.getFileExtension(t)}isInC3D(){return this.su.isInC3D()}isFacebook(){return this.su.isFacebook()}isC3D(){return location.hostname.indexOf(".creators3d.com")>-1||location.hostname.indexOf(".c3dstaging.com")>-1||"localhost"===location.hostname}isInH3D(){return document.referrer&&(-1===document.referrer.indexOf(".hexa3d.io/")||-1===document.referrer.indexOf(".h3dstaging.com/"))}isLocalhost(){return location.host.indexOf("localhost:")>-1}isInLocalhost(){return!!document.referrer&&document.referrer.indexOf("localhost:")>-1}isQaMode(){let t=!1;return(this.isLocalhost()||"vqa"===location.host.split(".")[0]||"vdev"===location.host.split(".")[0]||"1"===this.getUrlParams()["qa-mode"])&&(t=!0),t}isTestMode(){let t=!1;return(this.isLocalhost()||"1"===this.getUrlParams()["test-mode"])&&(t=!0),t}get sessionId(){return this._sessionId||(this._sessionId=this.generateUUID()),this._sessionId}set sessionId(t){throw"sessionId is a read only property!"}getDomain(){let t="",e=location.hostname.split(".");for(let i=1;i<e.length;i++)t+="."+e[i];return t}getSetverByHost(t=location.host){let e;switch(t){case o.Np:e=o.oc.LOCALHOST;break;case o.t9:e=o.oc.FLIX_HOST;break;case o.gF:e=o.oc.C3D_PROD_HOST;break;case o.Dq:e=o.oc.C3D_QA_HOST;break;case o.BT:e=o.oc.C3D_DEV_HOST;break;case o.kd:e=o.oc.H3D_PROD_HOST;break;case o.uD:e=o.oc.H3D_QA_HOST;break;case o.QS:e=o.oc.H3D_DEV_HOST;break;default:e=o.oc.H3D_PROD_HOST}return e}getEnv(t=location.host){switch(t){case o.t9:return o.E0.FLIX;default:return this.isC3D()?o.E0.CREATORS:o.E0.HEXA}}isDocHidden(){return"string"==typeof document.visibilityState&&"hidden"===document.visibilityState}hexToRgb(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,((t,e,i,r)=>e+e+i+i+r+r));const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}setTheme(t){let e=t instanceof Array?t[0]:t;if(e.length<=8&&"#"!==e.substring(0,1)&&(e="#"+e,t=e),"#"===e.substring(0,1)){let t=this.hexToRgb(e);e="rgba("+t.r+","+t.g+","+t.b+",0.2)"}else"rgb("===e.substring(0,4)&&(e="rgba("+e.substring(4,e.length-1)+",0.2)");let i=".body .linear-activity {background-color: "+e+"} ";i+=".body .determinate {background-color: "+t+"}";let r=document.createElement("style");return r.appendChild(document.createTextNode(i)),this._elements.body.appendChild(r),t}setBgColor(t){var e=this._elements.body;e.style.background=t+"  fixed",e.style.backgroundSize="cover",e.style.backgroundRepeat="no-repeat"}parseToArr(t,e=!1){if(t instanceof Array)return t;let i=[];if("string"==typeof t&&t)try{i=JSON.parse(t),e||0!==i.length||(i=null)}catch(e){i=t.split(",")}return i instanceof Array||(i=[i]),i}fixProtocol(t){return this.su.fixProtocol(t)}}},683:(t,e,i)=>{i(8081),i(7328),i(836),i(66).Array},8595:(t,e,i)=>{i(7453),i(27),i(9716),i(8762),i(9582),i(7400),i(2801),i(66).Object},2761:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},2094:(t,e,i)=>{var r=i(2190)("unscopables"),s=Array.prototype;null==s[r]&&i(4216)(s,r,{}),t.exports=function(t){s[r][t]=!0}},6365:(t,e,i)=>{var r=i(7334);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},9021:(t,e,i)=>{var r=i(5703),s=i(6078),o=i(8615);t.exports=function(t){return function(e,i,n){var a,l=r(e),h=s(l.length),p=o(n,h);if(t&&i!=i){for(;h>p;)if((a=l[p++])!=a)return!0}else for(;h>p;p++)if((t||p in l)&&l[p]===i)return t||p||0;return!t&&-1}}},1071:(t,e,i)=>{var r=i(7334),s=i(9141),o=i(2190)("species");t.exports=function(t){var e;return s(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!s(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},3531:(t,e,i)=>{var r=i(1071);t.exports=function(t,e){return new(r(t))(e)}},6688:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},66:t=>{var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},6644:(t,e,i)=>{"use strict";var r=i(8558),s=i(6061);t.exports=function(t,e,i){e in t?r.f(t,e,s(0,i)):t[e]=i}},1528:(t,e,i)=>{var r=i(2761);t.exports=function(t,e,i){if(r(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,s){return t.call(e,i,r,s)}}return function(){return t.apply(e,arguments)}}},1622:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},6628:(t,e,i)=>{t.exports=!i(8625)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},5050:(t,e,i)=>{var r=i(7334),s=i(8113).document,o=r(s)&&r(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},3603:t=>{t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},5772:(t,e,i)=>{var r=i(8113),s=i(66),o=i(4216),n=i(7738),a=i(1528),l=function(t,e,i){var h,p,d,c,u=t&l.F,m=t&l.G,g=t&l.S,f=t&l.P,v=t&l.B,y=m?r:g?r[e]||(r[e]={}):(r[e]||{}).prototype,b=m?s:s[e]||(s[e]={}),w=b.prototype||(b.prototype={});for(h in m&&(i=e),i)d=((p=!u&&y&&void 0!==y[h])?y:i)[h],c=v&&p?a(d,r):f&&"function"==typeof d?a(Function.call,d):d,y&&n(y,h,d,t&l.U),b[h]!=d&&o(b,h,c),f&&w[h]!=d&&(w[h]=d)};r.core=s,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},8625:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},2674:(t,e,i)=>{"use strict";var r=i(9141),s=i(7334),o=i(6078),n=i(1528),a=i(2190)("isConcatSpreadable");t.exports=function t(e,i,l,h,p,d,c,u){for(var m,g,f=p,v=0,y=!!c&&n(c,u,3);v<h;){if(v in l){if(m=y?y(l[v],v,i):l[v],g=!1,s(m)&&(g=void 0!==(g=m[a])?!!g:r(m)),g&&d>0)f=t(e,i,m,o(m.length),f,d-1)-1;else{if(f>=9007199254740991)throw TypeError();e[f]=m}f++}v++}return f}},646:(t,e,i)=>{t.exports=i(8655)("native-function-to-string",Function.toString)},8113:t=>{var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},4040:t=>{var e={}.hasOwnProperty;t.exports=function(t,i){return e.call(t,i)}},4216:(t,e,i)=>{var r=i(8558),s=i(6061);t.exports=i(6628)?function(t,e,i){return r.f(t,e,s(1,i))}:function(t,e,i){return t[e]=i,t}},5100:(t,e,i)=>{t.exports=!i(6628)&&!i(8625)((function(){return 7!=Object.defineProperty(i(5050)("div"),"a",{get:function(){return 7}}).a}))},8467:(t,e,i)=>{var r=i(6688);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},9141:(t,e,i)=>{var r=i(6688);t.exports=Array.isArray||function(t){return"Array"==r(t)}},7334:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},1422:t=>{t.exports=!1},8558:(t,e,i)=>{var r=i(6365),s=i(5100),o=i(1382),n=Object.defineProperty;e.f=i(6628)?Object.defineProperty:function(t,e,i){if(r(t),e=o(e,!0),r(i),s)try{return n(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},8437:(t,e,i)=>{"use strict";t.exports=i(1422)||!i(8625)((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete i(8113)[t]}))},4662:(t,e,i)=>{var r=i(5873),s=i(6061),o=i(5703),n=i(1382),a=i(4040),l=i(5100),h=Object.getOwnPropertyDescriptor;e.f=i(6628)?h:function(t,e){if(t=o(t),e=n(e,!0),l)try{return h(t,e)}catch(t){}if(a(t,e))return s(!r.f.call(t,e),t[e])}},6604:(t,e,i)=>{var r=i(5547),s=i(3603).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,s)}},7957:(t,e)=>{e.f=Object.getOwnPropertySymbols},9002:(t,e,i)=>{var r=i(4040),s=i(6033),o=i(8034)("IE_PROTO"),n=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=s(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?n:null}},5547:(t,e,i)=>{var r=i(4040),s=i(5703),o=i(9021)(!1),n=i(8034)("IE_PROTO");t.exports=function(t,e){var i,a=s(t),l=0,h=[];for(i in a)i!=n&&r(a,i)&&h.push(i);for(;e.length>l;)r(a,i=e[l++])&&(~o(h,i)||h.push(i));return h}},2912:(t,e,i)=>{var r=i(5547),s=i(3603);t.exports=Object.keys||function(t){return r(t,s)}},5873:(t,e)=>{e.f={}.propertyIsEnumerable},758:(t,e,i)=>{var r=i(6628),s=i(2912),o=i(5703),n=i(5873).f;t.exports=function(t){return function(e){for(var i,a=o(e),l=s(a),h=l.length,p=0,d=[];h>p;)i=l[p++],r&&!n.call(a,i)||d.push(t?[i,a[i]]:a[i]);return d}}},6831:(t,e,i)=>{var r=i(6604),s=i(7957),o=i(6365),n=i(8113).Reflect;t.exports=n&&n.ownKeys||function(t){var e=r.f(o(t)),i=s.f;return i?e.concat(i(t)):e}},6061:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7738:(t,e,i)=>{var r=i(8113),s=i(4216),o=i(4040),n=i(5078)("src"),a=i(646),l="toString",h=(""+a).split(l);i(66).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,i,a){var l="function"==typeof i;l&&(o(i,"name")||s(i,"name",e)),t[e]!==i&&(l&&(o(i,n)||s(i,n,t[e]?""+t[e]:h.join(String(e)))),t===r?t[e]=i:a?t[e]?t[e]=i:s(t,e,i):(delete t[e],s(t,e,i)))})(Function.prototype,l,(function(){return"function"==typeof this&&this[n]||a.call(this)}))},8034:(t,e,i)=>{var r=i(8655)("keys"),s=i(5078);t.exports=function(t){return r[t]||(r[t]=s(t))}},8655:(t,e,i)=>{var r=i(66),s=i(8113),o="__core-js_shared__",n=s[o]||(s[o]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:i(1422)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},8615:(t,e,i)=>{var r=i(3338),s=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?s(t+e,0):o(t,e)}},3338:t=>{var e=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:e)(t)}},5703:(t,e,i)=>{var r=i(8467),s=i(1622);t.exports=function(t){return r(s(t))}},6078:(t,e,i)=>{var r=i(3338),s=Math.min;t.exports=function(t){return t>0?s(r(t),9007199254740991):0}},6033:(t,e,i)=>{var r=i(1622);t.exports=function(t){return Object(r(t))}},1382:(t,e,i)=>{var r=i(7334);t.exports=function(t,e){if(!r(t))return t;var i,s;if(e&&"function"==typeof(i=t.toString)&&!r(s=i.call(t)))return s;if("function"==typeof(i=t.valueOf)&&!r(s=i.call(t)))return s;if(!e&&"function"==typeof(i=t.toString)&&!r(s=i.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},5078:t=>{var e=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+i).toString(36))}},2190:(t,e,i)=>{var r=i(8655)("wks"),s=i(5078),o=i(8113).Symbol,n="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=n&&o[t]||(n?o:s)("Symbol."+t))}).store=r},7328:(t,e,i)=>{"use strict";var r=i(5772),s=i(2674),o=i(6033),n=i(6078),a=i(2761),l=i(3531);r(r.P,"Array",{flatMap:function(t){var e,i,r=o(this);return a(t),e=n(r.length),i=l(r,0),s(i,r,r,e,0,1,t,arguments[1]),i}}),i(2094)("flatMap")},836:(t,e,i)=>{"use strict";var r=i(5772),s=i(2674),o=i(6033),n=i(6078),a=i(3338),l=i(3531);r(r.P,"Array",{flatten:function(){var t=arguments[0],e=o(this),i=n(e.length),r=l(e,0);return s(r,e,e,i,0,void 0===t?1:a(t)),r}}),i(2094)("flatten")},8081:(t,e,i)=>{"use strict";var r=i(5772),s=i(9021)(!0);r(r.P,"Array",{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i(2094)("includes")},8762:(t,e,i)=>{"use strict";var r=i(5772),s=i(6033),o=i(2761),n=i(8558);i(6628)&&r(r.P+i(8437),"Object",{__defineGetter__:function(t,e){n.f(s(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},9582:(t,e,i)=>{"use strict";var r=i(5772),s=i(6033),o=i(2761),n=i(8558);i(6628)&&r(r.P+i(8437),"Object",{__defineSetter__:function(t,e){n.f(s(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},9716:(t,e,i)=>{var r=i(5772),s=i(758)(!0);r(r.S,"Object",{entries:function(t){return s(t)}})},7453:(t,e,i)=>{var r=i(5772),s=i(6831),o=i(5703),n=i(4662),a=i(6644);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,i,r=o(t),l=n.f,h=s(r),p={},d=0;h.length>d;)void 0!==(i=l(r,e=h[d++]))&&a(p,e,i);return p}})},7400:(t,e,i)=>{"use strict";var r=i(5772),s=i(6033),o=i(1382),n=i(9002),a=i(4662).f;i(6628)&&r(r.P+i(8437),"Object",{__lookupGetter__:function(t){var e,i=s(this),r=o(t,!0);do{if(e=a(i,r))return e.get}while(i=n(i))}})},2801:(t,e,i)=>{"use strict";var r=i(5772),s=i(6033),o=i(1382),n=i(9002),a=i(4662).f;i(6628)&&r(r.P+i(8437),"Object",{__lookupSetter__:function(t){var e,i=s(this),r=o(t,!0);do{if(e=a(i,r))return e.set}while(i=n(i))}})},27:(t,e,i)=>{var r=i(5772),s=i(758)(!1);r(r.S,"Object",{values:function(t){return s(t)}})},2599:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var r=i(4933),s=i.n(r),o=i(3476),n=i.n(o)()(s());n.push([t.id,":host {\r\n    display: block;\r\n    min-width: 1px;\r\n    min-height: 1px;\r\n}\r\n.body, #app, canvas#app-canvas {\r\n    min-width: 1px;\r\n    min-height: 1px;\r\n}\r\n.body {\r\n    margin: 0px;\r\n    overflow: hidden;\r\n    height: 100%;\r\n    position: relative;\r\n}\r\n#embed {\r\n    display: none;\r\n}\r\n.body.drop-files #app::after {\r\n    outline: 2px dashed #92b0b3;\r\n    outline-offset: -10px;\r\n    content: 'drop files here';\r\n    font-size: 1.25rem;\r\n    position: absolute;\r\n    text-align: center;\r\n    z-index: 10;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: calc(50vh + 1.25em);\r\n    padding-top: calc(50vh - 1.25em);\r\n    font-family: sans-serif;\r\n    text-transform: capitalize;\r\n    text-shadow: -1px -1px rgba(255, 255, 255, 0.5), 1px 1px rgba(0, 0, 0, 0.5);\r\n}\r\n.body.drop-files #app #embed {\r\n    display: block;\r\n    position: absolute;\r\n    z-index: 11;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    opacity: 0;\r\n    cursor: pointer;\r\n}\r\n.body.hide-main-canvas #app-canvas {\r\n    opacity: 0.001;\r\n}\r\n/* to solve Chrome's blank OffscreenCanvas bug */\r\n.body.first-paint #app-canvas {\r\n    animation-name: flush;\r\n    animation-duration: 0.2s;\r\n}\r\n/* .body.ar-glasses-active #app {\r\n    transform: rotateY(180deg);\r\n} */\r\n.body.ar-glasses-active .ar-glasses-canvas {\r\n    display: block;\r\n    position: absolute;\r\n    z-index: -1;\r\n    transform: translateX(-50%) translateY(-50%);\r\n    top: 50%;\r\n    left: 50%;\r\n}\r\n#app {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    top: 0;\r\n    left: 0;\r\n}\r\ncanvas#app-canvas, canvas.ar-glasses-canvas {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: relative;\r\n    transform: translateX(-50%) translateY(-50%);\r\n    top: 50%;\r\n    left: 50%;\r\n}\r\n.ar-glasses-canvas {\r\n    display: none;\r\n    position: relative;\r\n    transform: translateX(-50%);\r\n    left: 50%;\r\n}\r\n.xr-overlay {\r\n    display: none;\r\n}\r\n.body.ar-enabled .xr-overlay, .body.ar-enabled .xr-overlay .xr-actions {\r\n    display: block;\r\n}\r\n.body.ar-enabled.suppress-ar-icon .xr-overlay .xr-actions button#xr-enter {\r\n    display: none !important;\r\n}\r\n.body.configurator .xr-overlay {\r\n    display: block;\r\n}\r\n.xr-overlay .xr-actions {\r\n    display: none;\r\n    position: absolute;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 60px;\r\n    background-color: rgba(255, 255, 255, 0.3);\r\n    overflow: auto;\r\n}\r\n.xr-overlay .xr-actions button {\r\n    background: none;\r\n    width: 50px;\r\n    height: 50px;\r\n    border-radius: 50%;\r\n    margin: 5px 10px;\r\n    border: none;\r\n}\r\n.xr-overlay .xr-actions button img {\r\n    width: 36px;\r\n    height: 36px;\r\n    padding: 5px;\r\n    vertical-align: bottom;\r\n    cursor: pointer;\r\n}\r\n.xr-overlay .configurator {\r\n    position: absolute;\r\n    bottom: 5px;\r\n    width: 100%;\r\n    height: 60px;\r\n    background-color: rgba(255, 255, 255, 0.3);\r\n    overflow-x: auto;\r\n    overflow-y: hidden;\r\n    text-align: center;\r\n}\r\n.xr-overlay .configurator .variant {\r\n    border: none;\r\n    outline: none;\r\n    display: inline-block;\r\n    width: 50px;\r\n    height: 50px;\r\n    margin: 5px 10px;\r\n    border-radius: 50%;\r\n    box-shadow: inset 1px 2px 2px rgba(255, 255, 255, 0.5), 1px 2px 2px rgba(0, 0, 0, 0.65);\r\n    cursor: pointer;\r\n    transition-duration: .5s;\r\n    transition-property: opacity;\r\n}\r\n.xr-overlay .configurator .variant.loading {\r\n    display: none;\r\n}\r\n/* .xr-overlay .configurator .variant.loaded {} */\r\n.xr-overlay .configurator .variant.current {\r\n    box-shadow: 0px 0px 0px 3px #ffffff, 0px 0px 0px 5px #000000;\r\n}\r\n.body.ar .xr-overlay {\r\n    display: block;\r\n}\r\n#stabilization {\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    width: 400px;\r\n    height: 400px;\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n    z-index: 10;\r\n    display: none;\r\n}\r\n.body.ar #stabilization {\r\n    display: block;\r\n}\r\n.body.ar.stabilized #stabilization {\r\n    display: none;\r\n}\r\n.body.ar #xr-enter {\r\n    display: none;\r\n}\r\n.body #xr-exit {\r\n    display: none;\r\n}\r\n.body.ar #xr-exit {\r\n    display: inline;\r\n}\r\n.body.flip-y #app {\r\n    transform: rotateY(180deg);\r\n}\r\n.disp-none {\r\n    display: none;\r\n}\r\n.pos-abs {\r\n    position: absolute;\r\n}\r\n.text-center {\r\n    text-align: center;\r\n}\r\n.fullscreen_toggle {\r\n    cursor: pointer;\r\n    position: absolute;\r\n    z-index: 100;\r\n    top: 20px;\r\n    right: 20px;\r\n    transform: scale(0);\r\n    transition-duration: .5s;\r\n}\r\n.fullscreen_toggle.visible {\r\n    transform: scale(1);\r\n}\r\n#preload_img_wrap {\r\n    margin: 0;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n#preload_img_wrap #preload_percentage {\r\n    position: absolute;\r\n}\r\n#preload_img_wrap .preload-text {\r\n    text-align: center;\r\n    font-size: 18px;\r\n    margin: 0;\r\n    position: absolute;    \r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    display: none;\r\n    bottom: 0;\r\n    color: #333333;\r\n    font-family: SANS-SERIF, Arial;\r\n}\r\n\r\n#preload_img_wrap img.white-overlay-img {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: contain;\r\n    opacity: 0.3;\r\n    position: absolute;\r\n}\r\n\r\n#preload_img_wrap img.white-overlay-img-opacity {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: contain;\r\n    position: absolute;  \r\n}\r\n\r\n.body.loaded #preload_img_wrap {\r\n    display: none;\r\n}\r\n.linear-activity {\r\n    overflow: hidden;\r\n    width: 100%;\r\n    height: 0px;\r\n    background-color: rgba(100, 255, 219, 0.2);\r\n    position: absolute;\r\n    z-index: 100;\r\n    transition-duration: .35s;\r\n    transition-property: height;\r\n}\r\n.determinate {\r\n    position: relative;\r\n    max-width: 100%;\r\n    height: 100%;\r\n    transition: width .5s ease-in-out;\r\n    background-color: #64FFDA;\r\n}\r\n.camera-rotation {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n}\r\n.camera-rotation .deg {\r\n    width: 70px;\r\n    float: right;\r\n    clear: both;\r\n}\r\n.center-me-abs-x {\r\n    position: absolute;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n}\r\n.bottom-controllers {\r\n    bottom: 150px;\r\n    width: 150px;\r\n}\r\n.def-transition {\r\n    transition-duration: 0.5s;\r\n}\r\n.opacity {\r\n    opacity: 0;\r\n}\r\n.label-icon {\r\n    position: absolute;\r\n    bottom: 10px;\r\n    right: 10px;\r\n    height: 40px;\r\n    background-repeat: no-repeat;\r\n    width: 40px;\r\n    display: inline-block;\r\n    background-size: 70%;\r\n    background-position: center;\r\n    border-radius: 50%;\r\n}\r\n.watermark.label-icon {\r\n    background-image: unset;\r\n    background-image: none;\r\n    background-color: transparent;\r\n    width: 105px;\r\n    height: 57px;\r\n    opacity: 0.5;\r\n    transition: opacity 0.5s;\r\n    background-size: 92%;\r\n    border-radius: 5px;\r\n}\r\n.watermark.label-icon:hover {\r\n    opacity: 1;\r\n}\r\n.tutorial {\r\n    display: none;\r\n    opacity: 0;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translateX(-50%) translateY(-50%);\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n}\r\n.tutorial.t-1, .tutorial.t-2 {\r\n    width: 80px;\r\n    height: 80px;\r\n}\r\n.tutorial.t-3 {\r\n    width: 40px;\r\n    height: 40px;\r\n    left: calc(50%);\r\n    transition-duration: .3s;\r\n    transition-property: opacity;\r\n    filter: invert(1) drop-shadow(0px 0px 2px black);\r\n}\r\n.tutorial.visible {\r\n    display: inline-block;\r\n}\r\n.tutorial.active {\r\n    opacity: 1;\r\n}\r\n.tutorial.active.t-1, .tutorial.active.t-2 {\r\n    animation-name: tutorial;\r\n    animation-duration: 1200ms;\r\n    animation-timing-function: linear;\r\n    animation-fill-mode: forwards;\r\n}\r\n.texture-video {\r\n    opacity: 0.001;\r\n    position: absolute;\r\n    z-index: -100;\r\n}\r\n.texture-video-play {\r\n    position: absolute;\r\n    z-index: 1000;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    border: none;\r\n    font-size: 40px;\r\n    background-repeat: no-repeat;\r\n    background-size: 72px;\r\n    background-color: rgba(255,255,255,0.5);\r\n    background-position: center;\r\n}\r\n#face-track-canvas {\r\n    z-index: 10;\r\n    position: absolute;\r\n    max-height: 100%;\r\n    max-width: 100%;\r\n    left: 50%;\r\n    top: 50%;\r\n    width: 100vmin;\r\n    transform: translate(-50%, -50%) rotateY(180deg);\r\n}\r\n.face-detection {\r\n    position: absolute;\r\n    z-index: 1000;\r\n    width: 50vw;\r\n    height: 50vh;\r\n    top: 25vh;\r\n    left: 25vw;\r\n}\r\n@keyframes tutorial {\r\n    0% {\r\n        opacity: 0;\r\n    }\r\n    20% {\r\n        opacity: 1;\r\n    }\r\n    80% {\r\n        opacity: 1;\r\n    }\r\n    100% {\r\n        opacity: 0;\r\n    }\r\n}\r\n@keyframes flush {\r\n    0% {\r\n        background-color: #fff;\r\n    }\r\n    100% {\r\n        background-color: transparent;\r\n    }\r\n}",""]);const a=n},3476:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",r=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),r&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),r&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,r,s,o){"string"==typeof t&&(t=[[null,t,void 0]]);var n={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(n[l]=!0)}for(var h=0;h<t.length;h++){var p=[].concat(t[h]);r&&n[p[0]]||(void 0!==o&&(void 0===p[5]||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=o),i&&(p[2]?(p[1]="@media ".concat(p[2]," {").concat(p[1],"}"),p[2]=i):p[2]=i),s&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=s):p[4]="".concat(s)),e.push(p))}},e}},4933:t=>{"use strict";t.exports=function(t){return t[1]}},9312:(t,e,i)=>{"use strict";function r(t,e,i,r){return new(i||(i=Promise))((function(s,o){function n(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,a)}l((r=r.apply(t,e||[])).next())}))}i.d(e,{mG:()=>r}),Object.create,Object.create}},i={};function r(t){if(i[t])return i[t].exports;var s=i[t]={id:t,exports:{}};return e[t](s,s.exports,r),s.exports}r.m=e,r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce(((e,i)=>(r.f[i](t,e),e)),[])),r.u=t=>t+".bundle.js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},r.l=(e,i,s,o)=>{if(t[e])t[e].push(i);else{var n,a;if(void 0!==s)for(var l=document.getElementsByTagName("script"),h=0;h<l.length;h++){var p=l[h];if(p.getAttribute("src")==e){n=p;break}}n||(a=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,r.nc&&n.setAttribute("nonce",r.nc),n.src=e),t[e]=[i];var d=(i,r)=>{n.onerror=n.onload=null,clearTimeout(c);var s=t[e];if(delete t[e],n.parentNode&&n.parentNode.removeChild(n),s&&s.forEach((t=>t(r))),i)return i(r)},c=setTimeout(d.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=d.bind(null,n.onerror),n.onload=d.bind(null,n.onload),a&&document.head.appendChild(n)}},r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{var t={5412:0,179:0};r.f.j=(e,i)=>{var s=r.o(t,e)?t[e]:void 0;if(0!==s)if(s)i.push(s[2]);else{var o=new Promise(((i,r)=>{s=t[e]=[i,r]}));i.push(s[2]=o);var n=r.p+r.u(e),a=new Error;r.l(n,(i=>{if(r.o(t,e)&&(0!==(s=t[e])&&(t[e]=void 0),s)){var o=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+n+")",a.name="ChunkLoadError",a.type=o,a.request=n,s[1](a)}}),"chunk-"+e,e)}};var e=(e,i)=>{for(var s,o,[n,a,l]=i,h=0,p=[];h<n.length;h++)o=n[h],r.o(t,o)&&t[o]&&p.push(t[o][0]),t[o]=0;for(s in a)r.o(a,s)&&(r.m[s]=a[s]);for(l&&l(r),e&&e(i);p.length;)p.shift()()},i=self.webpackChunk=self.webpackChunk||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),(()=>{"use strict";var t,e=r(9312),i=r(637),s=r(8426),o=r(7571);!function(t){t[t.Number=1]="Number",t[t.String=2]="String",t[t.Boolean=3]="Boolean",t[t.Date=4]="Date",t[t.NumbersArray=5]="NumbersArray",t[t.StringsArray=6]="StringsArray",t[t.BooleansArray=7]="BooleansArray",t[t.DatesArray=8]="DatesArray",t[t.BooleanNullable=9]="BooleanNullable",t[t.Any=10]="Any"}(t||(t={}));var n=r(924);const a={server:{type:t.Number,default:null},load:{type:t.String,default:null},autorotate:{type:t.Any,default:!1},"json-data":{type:t.Any,default:!1,name:"jsonData"},"face-mesh":{type:t.Boolean,default:!1,name:"faceMesh"},"disable-tutorial":{type:t.Boolean,default:!1,name:"disableTutorial"},"force-tutorial":{type:t.Boolean,default:!1,name:"forceTutorial"},"ar-glasses":{type:t.Boolean,default:!1,name:"arGlasses"},"ar-headphones":{type:t.Boolean,default:!1,name:"arHeadphones"},"ar-helmet":{type:t.Boolean,default:!1,name:"arHelmet"},watermark:{type:t.Number,default:0},tv:{type:t.Number,default:110},br:{type:t.Boolean,default:!1,name:"br"},gzip:{type:t.Boolean,default:!1},webp:{type:t.Boolean,default:!1},decrypt:{type:t.Boolean,default:!1},ctrl:{type:t.Number,default:null},closeup:{type:t.Boolean,default:!1,name:"closeup"},debug:{type:t.Boolean,default:!1,name:"debug"},"frame-id":{type:t.String,default:null,name:"frameID"},stats:{type:t.Boolean,default:!1,name:"stats"},language:{type:t.String,default:"en",name:"language"},"theme-color":{type:t.String,default:"#64FFDA",name:"themeColor"},offscreen:{type:t.Boolean,default:!0},ltype:{type:t.Number,default:null},hdr:{type:t.Number,default:null},"hdr-intensity":{type:t.Number,default:null,name:"hdrIntensity"},"hdr-blur":{type:t.Boolean,default:!1,name:"hdrBlur"},hdrbg:{type:t.Boolean,default:!1},"hdr-format":{type:t.String,default:null,name:"hdrFormat"},"le-probe":{type:t.Number,default:null,name:"leProbe"},side:{type:t.Number,default:null},sid:{type:t.String,default:null},fsexit:{type:t.String,default:null},fsenter:{type:t.String,default:null},gginterval:{type:t.Number,default:null},ggnumofframes:{type:t.Number,default:null},ggwidth:{type:t.Number,default:null},ggheight:{type:t.Number,default:null},ggsampleInterval:{type:t.Number,default:null},ggrotatespeen:{type:t.Number,default:null},ar:{type:t.Boolean,default:!1},"loader-height":{type:t.Number,default:5,name:"loaderHeight"},"tutorial-types":{type:t.NumbersArray,default:[],name:"tutorialTypes"},"tutorial-views":{type:t.Number,default:null,name:"tutorialViews"},grid:{type:t.Boolean,default:!1},xray:{type:t.Boolean,default:!1},pivot:{type:t.NumbersArray,default:[]},"le-hem":{type:t.Number,default:null,name:"leHem"},"le-dir":{type:t.Number,default:null,name:"leDir"},"le-pnt":{type:t.Number,default:null,name:"lePnt"},"le-amb":{type:t.Number,default:null,name:"leAmb"},"le-spt":{type:t.Number,default:null,name:"leSpt"},"le-hem-c":{type:t.String,default:null,name:"leHemC"},"le-dir-c":{type:t.String,default:null,name:"leDirC"},"le-pnt-c":{type:t.String,default:null,name:"lePntC"},"le-amb-c":{type:t.String,default:null,name:"leAmbC"},"le-spt-c":{type:t.String,default:null,name:"leSptC"},"le-dir-p":{type:t.NumbersArray,default:[],name:"leDirP"},"le-spt-p":{type:t.NumbersArray,default:[],name:"leSptP"},"le-hem-hsl":{type:t.NumbersArray,default:[],name:"leHemHsl"},"le-dir-hsl":{type:t.NumbersArray,default:[],name:"leDirHsl"},"le-pnt-hsl":{type:t.NumbersArray,default:[],name:"lePntHsl"},"le-amb-hsl":{type:t.NumbersArray,default:[],name:"leAmbHsl"},"le-spt-hsl":{type:t.NumbersArray,default:[],name:"leSptHsl"},"le-dir-angle":{type:t.Number,default:null,name:"leDirAngle"},"le-spt-angle":{type:t.Number,default:null,name:"leSptAngle"},"le-dir-distance":{type:t.Number,default:null,name:"leDirDistance"},"le-spt-distance":{type:t.Number,default:null,name:"leSptDistance"},"le-spt-decay":{type:t.Number,default:null,name:"leSsptDecay"},"shadow-type":{type:t.StringsArray,default:[],name:"shadowType"},"shadow-map-dim":{type:t.StringsArray,default:[],name:"shadowMapDim"},"broadcast-pos":{type:t.Boolean,default:!1,name:"broadcastPos"},"normal-text":{type:t.String,default:null,name:"normalText"},wireframe:{type:t.Boolean,default:!1},"shaded-wireframe":{type:t.Boolean,default:!1,name:"shadedWireframe"},"shaded-wireframe-c":{type:t.String,default:null,name:"shadedWireframeC"},scale:{type:t.NumbersArray,default:null},plane:{type:t.Number,default:null},"plane-c":{type:t.String,default:null,name:"planeC"},"plane-r":{type:t.String,default:null,name:"planeR"},phcl:{type:t.Boolean,default:!1},"tone-mapping":{type:t.Number,default:null},"cam-lights":{type:t.Boolean,default:!1,name:"camLights"},"show-cam-rot":{type:t.Boolean,default:!1,name:"showCamRot"},"focal-length":{type:t.Number,default:null,name:"focalLength"},"auto-adjust":{type:t.Boolean,default:!1,name:"autoAdjust"},"embed-loader":{type:t.Boolean,default:!1,name:"embedLoader"},anisotropy:{type:t.Number,default:!1},"mesh-id":{type:t.Boolean,default:!1,name:"meshId"},vto:{type:t.Number,default:null},"jewelwear-version":{type:t.String,default:null,name:"jewelwearVersion"},"jewelwear-type":{type:t.Number,default:null,name:"jewelwearType"},dimensions:{type:t.String,default:null},"dimensions-c":{type:t.String,default:null,name:"dimensionsC"},"dimensions-u":{type:t.Number,default:null,name:"dimensionsU"},config:{type:t.Boolean,default:!1},exp:{type:t.Number,default:null},bri:{type:t.Number,default:null},con:{type:t.Number,default:null},sat:{type:t.Number,default:null},fov:{type:t.Number,default:null},tsl:{type:t.Number,default:null},pv:{type:t.String,default:null},pvtext:{type:t.String,default:null},gifgen:{type:t.Boolean,default:null},create_images_by_tour:{type:t.Boolean,default:null,name:"createImagesByTour"},"animate-enter":{type:t.Boolean,default:!0,name:"animateEnter"},bgcolor:{type:t.String,default:null},"cam-type":{type:t.Number,default:null,name:"camType"},frustum:{type:t.Number,default:null},"adaptive-render":{type:t.Boolean,default:!1,name:"adaptiveRender"},"c-damping":{type:t.Boolean,default:!0,name:"cDamping"},"no-distance-limit":{type:t.Boolean,default:!1,name:"noDistanceLimit"},"xr-reference-space":{type:t.String,default:"viewer",name:"xrReferenceSpace"}};var l=r(2599),h=r(4740);const p=HTMLElement;window.HTMLElement=function(){return Reflect.construct(p,[],this.constructor)},HTMLElement.prototype=p.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,p);class d extends HTMLElement{constructor(){super(),this._onConnected=[]}static get observedAttributes(){return Object.keys(a)}normalizeField(e,i,r){if(null===e)return r;switch(i){case t.Number:e*=1;break;case t.String:e=String(e);break;case t.Boolean:e="false"!==e&&"0"!==e&&!!e;break;case t.BooleanNullable:if("null"===e||null===e)break;e="false"!==e&&"0"!==e&&!!e;break;case t.Date:e=new Date(e).getTime();break;case t.StringsArray:e=(e=this.utilsWrap.parseToArr(e)).map((t=>t.toString()));break;case t.NumbersArray:e=(e=this.utilsWrap.parseToArr(e)).map((t=>1*t));break;case t.BooleansArray:e=(e=this.utilsWrap.parseToArr(e)).map((t=>"false"!==t&&!!t));break;case t.DatesArray:e=(e=this.utilsWrap.parseToArr(e)).map((t=>new Date(t).getTime()));break;default:e=e}return e}getAttrubuteValue(t){let e=this.getAttribute(t);return a[t]?this.normalizeField(e,a[t].type,a[t].default):e}defineTemplate(){this.template=document.createElement("template"),this.template.innerHTML='<style></style> <div class="body"> <img class="fullscreen_toggle disp-none" alt="fullscreen"> <div id="preload_img_wrap" class="pos-abs"> <img class="white-overlay-img-opacity"> <img class="white-overlay-img"> <div class="preload-text"></div> </div> <div class="linear-activity"> <div class="determinate" style="width:0"></div> </div> <div id="app"> <canvas id="app-canvas"></canvas> <canvas class="ar-glasses-canvas" id="ar-glasses-canvas"></canvas> <canvas class="ar-glasses-canvas" id="ar-glasses-canvas-2"></canvas> <input type="file" id="embed" multiple="multiple"> </div> <div class="xr-overlay"> <div class="xr-actions"> <button id="xr-enter"><img alt="Enter AR Mode"></button> <button id="xr-exit"><img alt="Exit AR Mode"></button> <button class="disp-none" id="xr-pos"><img alt="Position"></button> </div> <div class="configurator disp-none"></div> </div> <div class="pos-abs tutorial zoom"></div> <div class="pos-abs tutorial rotate"></div> </div>'}updateStyle(){this.root.querySelector("style").textContent=l.Z}setElements(){this.elements={root:this.root,app:this.root.querySelector("#app"),zoomTutorial:this.root.querySelector(".tutorial.zoom"),rotateTutorial:this.root.querySelector(".tutorial.rotate"),appCanvas:this.root.querySelector("#app-canvas"),arGlassesCanvas:this.root.querySelector("#ar-glasses-canvas"),arGlassesCanvas2:this.root.querySelector("#ar-glasses-canvas-2"),body:this.root.querySelector(".body"),configurator:this.root.querySelector(".configurator"),embed:this.root.querySelector("#embed"),fullscreenToggle:this.root.querySelector(".fullscreen_toggle"),preloadImgWrap:this.root.querySelector("#preload_img_wrap"),preloadImg:this.root.querySelector("#preload_img_wrap img.white-overlay-img"),preloadImgOpacity:this.root.querySelector("#preload_img_wrap img.white-overlay-img-opacity"),preloadPreviewText:this.root.querySelector("#preload_img_wrap .preload-text"),xrActions:this.root.querySelector(".xr-actions"),xrEnter:this.root.querySelector("#xr-enter"),xrExit:this.root.querySelector("#xr-exit"),xrOverlay:this.root.querySelector(".xr-overlay"),xrPos:this.root.querySelector("#xr-pos"),determinate:this.root.querySelector(".determinate"),linearActivity:this.root.querySelector(".linear-activity")},this.ro&&this.ro.disconnect(),self.ResizeObserver?(this.ro=new self.ResizeObserver((t=>{this.onElemResize()})),this.ro.observe(this.elements.app)):this.root.addEventListener("resize",(()=>{setTimeout((()=>this.onElemResize.bind(this)),500)}),!1)}getUrlParams(){let t={};this.getAttributeNames().forEach((e=>{t[e]=this.getAttrubuteValue(e)}));for(let e in a)a[e].name&&(t[a[e].name]=t[e]),void 0===t[e]&&(t[a[e].name||e]=a[e].default),a[e].name&&a[e].name!==e&&delete t[e];return t.server||(t.server=this.utilsWrap.getSetverByHost()),t.phcl=this.getFixPhcl(),t}onElemResize(){if(this._props){const t=this.getBoundingClientRect();this._props.width=t.width,this._props.height=t.height,this.updateProps(),this.wrapManager&&this.wrapManager.onWindowResize()}}connectedCallback(){return(0,e.mG)(this,void 0,void 0,(function*(){this.root=this.attachShadow({mode:"closed"}),this.defineTemplate(),this.root.appendChild(this.template.content.cloneNode(!0)),this.setElements(),this.updateStyle(),this.utilsWrap=new i.Z(this.elements,this._props),this.storage=new s.V;const t=this.getUrlParams();this.cdn=new o.U({env:this.utilsWrap.getEnv(),isQaMode:this.utilsWrap.isQaMode(),isTestMode:this.utilsWrap.isTestMode(),domain:`${location.protocol}//${location.host}`,server:t.server}),yield this.setProps(),this.wrapManager=new n.k(this.elements,this._props),this._isConnected=!0,this._onConnected.forEach((t=>t())),this._onConnected=[]}))}getFixTV(){return this.getAttrubuteValue("tv")}getFixPhcl(){return this.getAttrubuteValue("phcl")}setProps(){return(0,e.mG)(this,void 0,void 0,(function*(){if(!this._props){const t=yield this.utilsWrap.testWebP(),e=this.getUrlParams(),i=this.getBoundingClientRect(),r=this.getAttrubuteValue("debug")?"":".min";let s=parseInt(this.storage.get("views"));isNaN(s)&&(s=0);const o=this.getFixTV();let n=this.getAttrubuteValue("tv");n===o&&(n=null),this._props={canvas:this.elements.appCanvas,closeup:this.getAttrubuteValue("closeup"),debug:this.getAttrubuteValue("debug"),domain:this.cdn.options.domain,env:this.utilsWrap.getEnv(),width:i.width,height:i.height,pixelRatio:window.devicePixelRatio,isC3D:this.utilsWrap.isC3D(),isLocalhost:this.utilsWrap.isLocalhost(),isQaMode:this.utilsWrap.isQaMode(),isTestMode:this.utilsWrap.isTestMode(),attributes:e,referrer:document.referrer,isAndroid:this.utilsWrap.isAndroid(),isIOS:this.utilsWrap.isIOS(),isEdgeNoChromium:this.utilsWrap.isEdgeNoChromium(),isOperaMini:this.utilsWrap.isOperaMini(),isBaidu:this.utilsWrap.isBaidu(),hasGzipSupport:this.utilsWrap.hasGzipSupport(),isMobile:this.utilsWrap.isMobile(),isWorker:!1,webpSupport:t,threeJsPath:`${this.cdn.modulesDomain}third-party/three.js/${o}/three${r}.js`,threeJsRevision:o,threeJsOrgRevision:n,minSuffix:r,isBlur:this.utilsWrap.isDocHidden(),href:location.href,version:d.VERSION,language:this.getAttrubuteValue("language"),primaryColor:this.getAttrubuteValue("theme-color"),numOfTutorialViews:s,stats:this.getAttrubuteValue("stats"),isFacebook:this.utilsWrap.isFacebook(),offscreen:this.getAttrubuteValue("offscreen")},this._props.primaryColor=this.utilsWrap.setTheme(this._props.primaryColor),this._props.attributes.bgcolor&&this.utilsWrap.setBgColor(this._props.attributes.bgcolor),this._isLoaded=!!e.load}}))}attributeChangedCallback(t,e,i){e!==i&&this.onAttribute(t)}load(){return(0,e.mG)(this,void 0,void 0,(function*(){let t=()=>(0,e.mG)(this,void 0,void 0,(function*(){this.wrapManager.lastLoadSrc!==this._props.attributes.load&&((yield this.wrapManager.initPreloader())||(this.wrapManager.props.isWorker?this.wrapManager.worker&&this.wrapManager.worker.postMessage({action:"load",to:h.NL.WORKER,from:h.NL.MAIN}):this.wrapManager.app&&this.wrapManager.app.load()))}));this.wrapManager?this._isConnected&&t():(this._props||(yield this.setProps()),this.wrapManager?t():this.wrapManager=new n.k(this.elements,this._props))}))}onAttribute(t){switch(t){case"load":this._isConnected?this.load():this._onConnected.push(this.load.bind(this))}this._isConnected&&(this._props.isBlur=this.utilsWrap.isDocHidden(),this._props.attributes[a[t].name||t]=this.getAttrubuteValue(t)),this.updateProps()}updateProps(){if(this._isConnected&&this._props&&this.wrapManager){const t=this.getUrlParams();this._props.attributes=t,this.wrapManager.setProps(this._props)}}adoptedCallback(){console.log("Custom square element moved to new page.")}disconnectedCallback(){console.log("Custom square element removed from page.")}}d.VERSION=846,window.customElements.define("hexa-viewer",d)})()})();